{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>ndfc-python contains Python classes and example scripts for interacting with Cisco's Nexus Dashboard Fabric Controller (NDFC) via its REST API.</p>"},{"location":"classes/CredentialSelector/","title":"CredentialSelector","text":""},{"location":"classes/CredentialSelector/#summary","title":"Summary","text":"<p>Decide which credential source to use for a credential (e.g. <code>nd_password</code>) and return the value of the credential from that source.</p>"},{"location":"classes/CredentialSelector/#raises","title":"Raises","text":""},{"location":"classes/CredentialSelector/#valueerror","title":"ValueError","text":"<ul> <li>If <code>credential_name</code> cannot be found in any source.</li> <li>If <code>script_args</code> is not a parser.parse_args() instance.</li> <li>If ansible_vault is found in <code>script_args</code>, and an error     occurs when reading the vault from the location provided.</li> </ul>"},{"location":"classes/CredentialSelector/#properties","title":"Properties","text":""},{"location":"classes/CredentialSelector/#mandatory","title":"Mandatory","text":""},{"location":"classes/CredentialSelector/#credential_name","title":"credential_name","text":"<p>The name of the credential from which to retrieve the value.  See Credentials for the list of supported credential names.</p>"},{"location":"classes/CredentialSelector/#script_args","title":"script_args","text":"<p>An instance of <code>parser.parse_args()</code> (from Python's <code>argparse</code> library) containing zero or more Credentials.</p> <p>If <code>script_args</code> contains <code>ansible_vault</code> i.e. the user passed <code>--ansible-vault /path/to/vault</code> on the script command-line, then Ansible Vault is considered as a credential source and the script, when run, will ask for the vault password.</p>"},{"location":"classes/CredentialSelector/#optional","title":"Optional","text":"<p>None</p>"},{"location":"classes/CredentialSelector/#description","title":"Description","text":"<p>There can be many (currently three) credentials sources.  This class decides among command-line arguments, environment variables, and Ansible Vault (if the <code>--ansible-vault</code> location is passed to the script).  It prioritizes them as follows:</p> <ol> <li>Command line argument(s)</li> <li>Environment variable(s)</li> <li>Ansible Vault (assuming the <code>--ansible-vault</code> argument is used and points    to a valid vault file)</li> </ol>"},{"location":"classes/CredentialSelector/#usage-example","title":"Usage example","text":"<p>See most any script in <code>./examples/*.py</code> for example usage. Reachability is a good example in that it demonstrates how to read and use <code>nxos_password</code> and <code>nxos_username</code> in addition to the Nexus Dashboard credentials.</p>"},{"location":"classes/CredentialSelector/#see-also","title":"See also","text":"<ul> <li>Credentials</li> <li>Running the example scripts</li> </ul>"},{"location":"classes/Log/","title":"Log","text":""},{"location":"classes/Log/#description","title":"Description","text":"<p>Create the base ndfc_python logging object</p>"},{"location":"classes/Log/#see-also","title":"See also","text":"<p>NdfcPythonLogger()</p>"},{"location":"classes/Log/#raises","title":"Raises","text":""},{"location":"classes/Log/#valueerror","title":"<code>ValueError</code>","text":"<ul> <li>An error is encountered reading the logging config file.</li> <li>An error is encountered parsing the logging config file.</li> <li>No formatters are found in the logging config file that are associated with the configured handlers.</li> </ul>"},{"location":"classes/Log/#typeerror","title":"<code>TypeError</code>","text":"<ul> <li><code>develop</code> is not a boolean.</li> </ul>"},{"location":"classes/Log/#methods","title":"Methods","text":"<code>commit()</code> <p>If <code>config</code> is None, disable logging.</p> <p>If <code>config</code> is a JSON file conformant with <code>logging.config.dictConfig</code> read the file and configure the base logger instance from the file's contents.</p>"},{"location":"classes/Log/#properties","title":"Properties","text":"<code>config</code> <p>Override the <code>NDFC_LOGGING_CONFIG</code> environment variable.  Value is an absolute path to a JSON file from which logging config is read.  The JSON file must conform to <code>logging.config.dictConfig</code> from Python's standard library.</p> <p>Type: str()</p> <p>Default: None</p> <p>Raises: None</p> <code>develop</code> <p>Disable or enable exceptions raised by the logging module.</p> <p>Type: bool()</p> <p>Default: False</p> <p>Raises: TypeError if value is not a bool()</p>"},{"location":"classes/Log/#usage","title":"Usage","text":"<p>By default, Log() does the following:</p> <ol> <li>Reads the environment variable <code>NDFC_LOGGING_CONFIG</code> to determine the path    to the logging config file.  If the environment variable is not set, then    logging is disabled.</li> <li>Sets <code>develop</code> to False.  This disables exceptions raised by the logging    module itself.</li> </ol>"},{"location":"classes/Log/#set-environment-variable","title":"Set environment variable","text":"<p>Set the environment variable <code>NDFC_LOGGING_CONFIG</code> to the path of the logging config file.  <code>bash</code> shell is used in the example below.</p> set NDFC_LOGGING_CONFIG<pre><code>export NDFC_LOGGING_CONFIG=\"/path/to/logging_config.json\"\n</code></pre>"},{"location":"classes/Log/#instantiate-log","title":"Instantiate <code>Log()</code>","text":"<p>Instantiate <code>Log()</code> and call <code>commit()</code> on the instance.</p> instantiate Log()<pre><code>import logging\nfrom ndfc_python.log_v2 import Log\n\ntry:\n    logger = Log()\n    logger.commit()\nexcept (TypeError, ValueError) as error:\n    print(f\"Opps! {error}\")\n    # handle error\n</code></pre> <p>At this point, a base/parent logger (<code>ndfc_python</code>) is created.  This loggerr is defined in the example logging config file further below.</p>"},{"location":"classes/Log/#create-a-logger-under-ndfc_python","title":"Create a logger under <code>ndfc_python</code>","text":"Create log instance<pre><code>log = logging.getLogger(\"ndfc_python.myLogger\")\n</code></pre>"},{"location":"classes/Log/#start-logging","title":"Start logging","text":"Start logging<pre><code>log.info(\"Logger created.\")\n</code></pre>"},{"location":"classes/Log/#disable-logging","title":"Disable logging","text":"<p>To disable for all children, unset the environment variable.</p> Disable logging for all ndfc_python child loggers<pre><code>unset NDFC_LOGGING_CONFIG\n</code></pre>"},{"location":"classes/Log/#enable-exceptions","title":"Enable exceptions","text":"<p>To enable exceptions from the logging module (not recommended, unless needed for development), set <code>develop</code> to True.</p> set log.develop<pre><code>from ndfc_python.log_v2 import Log\ntry:\n    log = Log()\n    log.develop = True\n    log.commit()\nexcept (TypeError, ValueError) as error:\n    # handle error\n</code></pre>"},{"location":"classes/Log/#override-ndfc_logging_config","title":"Override NDFC_LOGGING_CONFIG","text":"<p>To directly set the path to the logging config file, overriding the <code>NDFC_LOGGING_CONFIG</code> environment variable, set the <code>config</code> property prior to calling <code>commit()</code>:</p> Override NDFC_LOGGING_CONFIG<pre><code>from ndfc_python.log_v2 import Log\ntry:\n    log = Log()\n    log.config = \"/path/to/logging_config.json\"\n    log.commit()\nexcept (TypeError, ValueError) as error:\n    # handle error\n</code></pre>"},{"location":"classes/Log/#example-use-in-a-script","title":"Example use in a script","text":"<pre><code>import sys\nfrom ndfc_python.log_v2 import Log\n\ndef main():\n    try:\n        log = Log()\n        log.commit()\n    except (TypeError, ValueError) as error:\n        print(f\"Error setting up the logger: {error}\")\n        sys.exit(1)\n\n    log.info(\"Scipt started\")\n</code></pre>"},{"location":"classes/Log/#example-use-in-a-class","title":"Example use in a class","text":"Example use in a class<pre><code>class MyClass:\n    def __init__(self):\n        self.class_name = self.__class__.__name__\n        self.log = logging.getLogger(f\"ndfc_python.{self.class_name}\")\n    def some_method(self):\n        self.log.debug(\"This is a debug message.\")\n</code></pre>"},{"location":"classes/Log/#logging-config-file","title":"Logging Config File","text":"<p>The logging config file must conform to <code>logging.config.dictConfig</code> from Python's standard library.</p> <p>An example logging config file is shown below.</p> $HOME/repos/ndfc-python/lib/ndfc_python/logging_config.json<pre><code>{\n  \"version\": 1,\n  \"formatters\": {\n    \"standard\": {\n      \"class\": \"logging.Formatter\",\n      \"format\": \"%(asctime)s - %(levelname)s - [%(name)s.%(funcName)s.%(lineno)d] %(message)s\"\n    }\n  },\n  \"handlers\": {\n    \"console\": {\n        \"class\": \"logging.StreamHandler\",\n        \"formatter\": \"standard\",\n        \"stream\"  : \"ext://sys.stdout\"\n      },\n    \"file\": {\n      \"class\": \"logging.handlers.RotatingFileHandler\",\n      \"formatter\": \"standard\",\n      \"filename\": \"/tmp/ndfc-python.log\",\n      \"mode\": \"a\",\n      \"encoding\": \"utf-8\",\n      \"maxBytes\": 50000000,\n      \"backupCount\": 4\n    }\n  },\n  \"loggers\": {\n        \"ndfc_python\": {\n        \"handlers\": [\n            \"console\",\n            \"file\"\n        ],\n        \"level\": \"DEBUG\",\n        \"propagate\": false\n        },\n        \"dcnm\": {\n            \"handlers\": [\n            \"file\"\n            ],\n            \"level\": \"DEBUG\",\n            \"propagate\": false\n        },\n        \"root\": {\n            \"level\": \"INFO\",\n            \"handlers\": [\n            \"file\"\n            ]\n        }\n    }\n}\n</code></pre>"},{"location":"classes/NetworkCreate/","title":"NetworkCreate","text":""},{"location":"classes/NetworkCreate/#description","title":"Description","text":"<p>Create a network</p>"},{"location":"classes/NetworkCreate/#raises","title":"Raises","text":""},{"location":"classes/NetworkCreate/#valueerror","title":"<code>ValueError</code>","text":"<ul> <li><code>rest_send</code> is not set prior to calling <code>commit</code>.</li> <li><code>results</code> is not set prior to calling <code>commit</code>.</li> <li><code>network_name</code> is not set prior to calling <code>commit</code>.</li> <li><code>fabric_name</code> is not set prior to calling <code>commit</code>.</li> <li><code>network_id</code> is not set prior to calling <code>commit</code>.</li> <li><code>vlan_id</code> is not set prior to calling <code>commit</code>.</li> <li><code>vrf_name</code> is not set prior to calling <code>commit</code>.</li> <li><code>fabric_name</code> does not exist on the controller.</li> <li><code>vrf_name</code> does not exist in fabric <code>fabric_name</code>.</li> <li><code>network_name</code> already exists in fabric <code>fabric_name</code>.</li> <li>An error occurred when sending the <code>POST</code> request to the controller.</li> </ul>"},{"location":"classes/NetworkCreate/#properties","title":"Properties","text":""},{"location":"classes/NetworkCreate/#mandatory","title":"Mandatory","text":""},{"location":"classes/NetworkCreate/#fabric_name","title":"fabric_name","text":"<p>The name of the fabric containing the network to be created.</p> <ul> <li>default: None</li> <li>example: MyFabric</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#network_id","title":"network_id","text":"<p>The ID the controller should assign to <code>network_name</code>.</p> <ul> <li>default: None</li> <li>example: 30000</li> <li>type: int</li> </ul>"},{"location":"classes/NetworkCreate/#vrf_name","title":"vrf_name","text":"<p>The VRF associated with <code>network_name</code>.</p> <ul> <li>default: None</li> <li>example: MyVrf</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#optional","title":"Optional","text":""},{"location":"classes/NetworkCreate/#dhcp_server_addr_1","title":"dhcp_server_addr_1","text":"<p>Set's the value of <code>dhcpServerAddr1</code> in the <code>Default_Network_Universal</code> template.</p> <p>The first DHCP server associated with <code>network_name</code>.</p> <ul> <li>default: None</li> <li>example: 10.1.1.2</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#dhcp_server_addr_2","title":"dhcp_server_addr_2","text":"<p>Set's the value of <code>dhcpServerAddr2</code> in the <code>Default_Network_Universal</code> template.</p> <p>The second DHCP server associated with <code>network_name</code>.</p> <ul> <li>default: None</li> <li>example: 10.1.1.3</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#dhcp_server_addr_3","title":"dhcp_server_addr_3","text":"<p>Set's the value of <code>dhcpServerAddr3</code> in the <code>Default_Network_Universal</code> template.</p> <p>The third DHCP server associated with <code>network_name</code>.</p> <ul> <li>default: None</li> <li>example: 10.1.1.4</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#enable_netflow","title":"enable_netflow","text":"<p>Set's the value of <code>ENABLE_NETFLOW</code> in the <code>Default_Network_Universal</code> template.</p> <p>Netflow is supported only if it is enabled on fabric. For NX-OS only</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#enable_l3_on_border","title":"enable_l3_on_border","text":"<p>Set's the value of <code>enableL3OnBorder</code> in the <code>Default_Network_Universal</code> template.</p> <p>Create SVI on borders and border gateways, including vPC border gateways and anycast border gateways.</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#enable_l3_on_border_vpc_bgw","title":"enable_l3_on_border_vpc_bgw","text":"<p>Set's the value of <code>enableL3OnBorderVpcBgw</code> in the <code>Default_Network_Universal</code> template.</p> <p>Create SVI on borders and vPC border gateways. Not applicable to anycast border gateways.</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#gateway_ip_address","title":"gateway_ip_address","text":"<p>Set's the value of <code>gatewayIpAddress</code> in the <code>Default_Network_Universal</code> template.</p> <p>IPv4 Gateway/NetMask.</p> <ul> <li>default: None</li> <li>example: 192.0.2.1/24</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#gateway_ipv6_address","title":"gateway_ipv6_address","text":"<p>Set's the value of <code>gatewayIpV6Address</code> in the <code>Default_Network_Universal</code> template.</p> <p>Comma-separated list of IPv6/Prefix.</p> <ul> <li>default: None</li> <li>example: 2001:db8::1/64,2001:db9::1/64</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#igmp_version","title":"igmp_version","text":"<p>If set to non-default value (1 or 3), the <code>ip igmp version</code> command is generated on NX-OS and IOS-XE devices in <code>network_name</code>.</p> <p>See note below for NX-OS.</p> <ul> <li>default: 2</li> <li>example: 3</li> <li>type: str</li> <li>min: 1</li> <li>max: 3</li> <li>note: min is 2 for NX-OS</li> </ul>"},{"location":"classes/NetworkCreate/#intf_description","title":"intf_description","text":"<p>Set's the value of <code>intfDescription</code> in the <code>Default_Network_Universal</code> template.</p> <p>Interface Description.</p> <ul> <li>default: None</li> <li>example: Interface in MyNet</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#is_layer2_only","title":"is_layer2_only","text":"<p>Set's the value of <code>isLayer2Only</code> in the <code>Default_Network_Universal</code> template.</p> <p>If True, <code>network_name</code> will be a Layer 2 network. If False, <code>network_name</code> will be a Layer 3 network.</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#loopback_id","title":"loopback_id","text":"<p>Set's the value of <code>loopbackId</code> in the <code>Default_Network_Universal</code> template.</p> <p>Loopback ID for DHCP Relay interface</p> <ul> <li>default: None</li> <li>example: 10</li> <li>max: 1023</li> <li>min: 0</li> <li>type: int</li> </ul>"},{"location":"classes/NetworkCreate/#mcast_group","title":"mcast_group","text":"<p>Set's the value of <code>mcastGroup</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 225.1.1.1</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#mtu","title":"mtu","text":"<p>Set's the value of <code>mtu</code> in the <code>Default_Network_Universal</code> template.</p> <p>NX-OS Specific</p> <ul> <li>default: 9216</li> <li>example: 1500</li> <li>type: int</li> <li>min: 68</li> <li>max: 9216</li> </ul>"},{"location":"classes/NetworkCreate/#network_name","title":"network_name","text":"<p>The name of the network to create.</p> <ul> <li>default: MyNetwork_<code>network_id</code></li> <li>example: MyNet</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#nve_id","title":"nve_id","text":"<p>Set's the value of <code>nveId</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: 1</li> <li>example: 1</li> <li>type: int</li> <li>min: 1</li> <li>max: 1</li> </ul>"},{"location":"classes/NetworkCreate/#rt_both_auto","title":"rt_both_auto","text":"<p>Set's the value of <code>rtBothAuto</code> in the <code>Default_Network_Universal</code> template.</p> <p>Might be set in the fabric config and be read-only here? NX-OS Specific.</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#secondary_gw_1","title":"secondary_gw_1","text":"<p>Set's the value of <code>secondaryGW1</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 192.0.2.1/24</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#secondary_gw_2","title":"secondary_gw_2","text":"<p>Set's the value of <code>secondaryGW2</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 192.0.2.2/24</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#secondary_gw_3","title":"secondary_gw_3","text":"<p>Set's the value of <code>secondaryGW3</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 192.0.2.3/24</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#secondary_gw_4","title":"secondary_gw_4","text":"<p>Set's the value of <code>secondaryGW4</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 192.0.2.4/24</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#segment_id","title":"segment_id","text":"<p>Set's the value of <code>segmentId</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 30000</li> <li>type: int</li> </ul>"},{"location":"classes/NetworkCreate/#suppress_arp","title":"suppress_arp","text":"<p>Set's the value of <code>suppressArp</code> in the <code>Default_Network_Universal</code> template.</p> <p>ARP suppression is only supported if SVI is present when <code>is_layer2_only</code> is set to False.</p> <p>NX-OS Specific</p> <ul> <li>default: False</li> <li>example: NA</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#svi_netflow_monitor","title":"svi_netflow_monitor","text":"<p>Set's the value of <code>SVI_NETFLOW_MONITOR</code> in the <code>Default_Network_Universal</code> template.</p> <p>Applicable only if <code>is_layer2_only</code> is False and <code>enable_netflow</code> is True. Value must be a monitor name defined in fabric setting for Layer 3 Record. For NX-OS only.</p> <ul> <li>default: \"\"</li> <li>example: NA</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#tag","title":"tag","text":"<p>Set's the value of <code>tag</code> in the <code>Default_Network_Universal</code> template. NX-OS Specific</p> <p>Routing tag.</p> <ul> <li>default: 12345</li> <li>example: 54321</li> <li>type: int</li> <li>min: 0</li> <li>max: 4294967295</li> </ul>"},{"location":"classes/NetworkCreate/#trm_enabled","title":"trm_enabled","text":"<p>Set's the value of <code>trmEnabled</code> in the <code>Default_Network_Universal</code> template.</p> <p>If True, enable IPv4 Tenant Routed Multicast.</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#trm_v6_enabled","title":"trm_v6_enabled","text":"<p>Set's the value of <code>trmV6Enabled</code> in the <code>Default_Network_Universal</code> template.</p> <p>If True, enable IPv6 Tenant Routed Multicast.</p> <ul> <li>default: False</li> <li>example: True</li> <li>type: bool</li> </ul>"},{"location":"classes/NetworkCreate/#vrf_dhcp","title":"vrf_dhcp","text":"<p>Set's the value of <code>vrfDhcp</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: NA</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#vlan_name","title":"vlan_name","text":"<p>Set's the value of <code>vlanName</code> in the <code>Default_Network_Universal</code> template.</p> <p>If greater than 32 chars, enable <code>system vlan long-name</code> for NX-OS. Disable <code>VTPv1</code> and <code>VTPv2</code> or switch to <code>VTPv3</code> for IOS-XE.</p> <ul> <li>default: \"\"</li> <li>example: MyVlan</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#vlan_id","title":"vlan_id","text":"<p>Set's the value of <code>vlanId</code> in the <code>Default_Network_Universal</code> template.</p> <ul> <li>default: \"\"</li> <li>example: 1111</li> <li>type: int</li> <li>min: 1</li> <li>max: 4094</li> </ul>"},{"location":"classes/NetworkCreate/#vlan_netflow_monitor","title":"vlan_netflow_monitor","text":"<p>Set's the value of <code>VLAN_NETFLOW_MONITOR</code> in the <code>Default_Network_Universal</code> template.</p> <p>Applicable only if <code>enable_netflow</code> is True.</p> <p>Value must be a monitor name defined in fabric setting for Layer 3 Record. For NX-OS only</p> <ul> <li>default: \"\"</li> <li>example: NA</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkCreate/#example-script","title":"Example script","text":"Example Script<pre><code>import argparse\nimport logging\nimport sys\n\n# We are using our local copy of log_v2.py which is modified to allow\n# console logging.  The copy in the DCNM Ansible Collection specifically\n# disallows console logging.\nfrom ndfc_python.ndfc_python_config import NdfcPythonConfig\nfrom ndfc_python.ndfc_python_logger import NdfcPythonLogger\nfrom ndfc_python.ndfc_python_sender import NdfcPythonSender\nfrom ndfc_python.network_create import NetworkCreate\nfrom ndfc_python.parsers.parser_config import parser_config\nfrom ndfc_python.parsers.parser_nd_domain import parser_nd_domain\nfrom ndfc_python.parsers.parser_nd_ip4 import parser_nd_ip4\nfrom ndfc_python.parsers.parser_nd_password import parser_nd_password\nfrom ndfc_python.parsers.parser_nd_username import parser_nd_username\nfrom ndfc_python.parsers.parser_loglevel import parser_loglevel\nfrom plugins.module_utils.common.response_handler import ResponseHandler\nfrom plugins.module_utils.common.rest_send_v2 import RestSend\nfrom plugins.module_utils.common.results import Results\n\n\ndef setup_parser() -&gt; argparse.Namespace:\n    \"\"\"\n    ### Summary\n\n    Setup script-specific parser\n\n    Returns:\n        argparse.Namespace\n    \"\"\"\n    parser = argparse.ArgumentParser(\n        parents=[\n            parser_config,\n            parser_loglevel,\n            parser_nd_domain,\n            parser_nd_ip4,\n            parser_nd_password,\n            parser_nd_username,\n        ],\n        description=\"DESCRIPTION: Create a network.\",\n    )\n    return parser.parse_args()\n\nargs = setup_parser()\nNdfcPythonLogger()\nlog = logging.getLogger(\"ndfc_python.main\")\nlog.setLevel = args.loglevel\n\ntry:\n    ndfc_sender = NdfcPythonSender()\n    ndfc_sender.args = args\n    ndfc_sender.commit()\nexcept ValueError as error:\n    msg = f\"Exiting.  Error detail: {error}\"\n    log.error(msg)\n    sys.exit(1)\n\ntry:\n    ndfc_config = NdfcPythonConfig()\n    ndfc_config.filename = args.config\n    ndfc_config.commit()\n    config = ndfc_config.contents[\"config\"]\nexcept ValueError as error:\n    msg = f\"Exiting: Error detail: {error}\"\n    log.error(msg)\n    print(msg)\n    sys.exit()\n\nrest_send = RestSend({})\nrest_send.sender = ndfc_sender.sender\nrest_send.response_handler = ResponseHandler()\n\ntry:\n    instance = NetworkCreate()\n    instance.rest_send = rest_send\n    instance.results = Results()\n    instance.fabric_name = config.get(\"fabric_name\")\n    instance.network_name = config.get(\"network_name\")\n    instance.enable_ir = config.get(\"enable_ir\")\n    instance.gateway_ip_address = config.get(\"gateway_ip_address\")\n    instance.network_id = config.get(\"network_id\")\n    instance.vlan_id = config.get(\"vlan_id\")\n    instance.vrf_name = config.get(\"vrf_name\")\n    instance.commit()\nexcept ValueError as error:\n    msg = \"Error creating network. \"\n    msg += f\"Error detail: {error}\"\n    log.error(msg)\n    print(msg)\n    sys.exit(1)\n\nmsg = f\"Network {config.get('network_name')} \"\nmsg += f\"created in fabric {config.get('fabric_name')}\"\nprint(msg)\n</code></pre>"},{"location":"classes/NetworkDelete/","title":"NetworkDelete","text":""},{"location":"classes/NetworkDelete/#description","title":"Description","text":"<p>Delete a network</p>"},{"location":"classes/NetworkDelete/#raises","title":"Raises","text":""},{"location":"classes/NetworkDelete/#valueerror","title":"<code>ValueError</code>","text":"<ul> <li><code>rest_send</code> is not set prior to calling <code>commit</code>.</li> <li><code>results</code> is not set prior to calling <code>commit</code>.</li> <li><code>network_name</code> is not set prior to calling <code>commit</code>.</li> <li><code>fabric_name</code> is not set prior to calling <code>commit</code>.</li> <li><code>fabric_name</code> does not exist on the controller.</li> <li><code>network_name</code> does not exist in fabric <code>fabric_name</code>.</li> <li>An error occurred when sending the <code>DELETE</code> request to the controller.</li> </ul>"},{"location":"classes/NetworkDelete/#properties","title":"Properties","text":""},{"location":"classes/NetworkDelete/#mandatory","title":"Mandatory","text":""},{"location":"classes/NetworkDelete/#fabric_name","title":"fabric_name","text":"<p>The name of the fabric containing the network to be deleted.</p> <ul> <li>default: None</li> <li>example: MyFabric</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkDelete/#network_name","title":"network_name","text":"<p>The name of the network to delete.</p> <ul> <li>default: None</li> <li>example: MyNet</li> <li>type: str</li> </ul>"},{"location":"classes/NetworkDelete/#optional","title":"Optional","text":"<p>None</p>"},{"location":"classes/NetworkDelete/#example-script","title":"Example script","text":"Example Script<pre><code>import argparse\nimport logging\nimport sys\n\n# We are using our local copy of log_v2.py which is modified to allow\n# console logging.  The copy in the DCNM Ansible Collection specifically\n# disallows console logging.\nfrom ndfc_python.ndfc_python_config import NdfcPythonConfig\nfrom ndfc_python.ndfc_python_logger import NdfcPythonLogger\nfrom ndfc_python.ndfc_python_sender import NdfcPythonSender\nfrom ndfc_python.network_delete import NetworkDelete\nfrom ndfc_python.parsers.parser_config import parser_config\nfrom ndfc_python.parsers.parser_nd_domain import parser_nd_domain\nfrom ndfc_python.parsers.parser_nd_ip4 import parser_nd_ip4\nfrom ndfc_python.parsers.parser_nd_password import parser_nd_password\nfrom ndfc_python.parsers.parser_nd_username import parser_nd_username\nfrom ndfc_python.parsers.parser_loglevel import parser_loglevel\nfrom plugins.module_utils.common.response_handler import ResponseHandler\nfrom plugins.module_utils.common.rest_send_v2 import RestSend\nfrom plugins.module_utils.common.results import Results\n\n\ndef setup_parser() -&gt; argparse.Namespace:\n    \"\"\"\n    ### Summary\n\n    Setup script-specific parser\n\n    Returns:\n        argparse.Namespace\n    \"\"\"\n    parser = argparse.ArgumentParser(\n        parents=[\n            parser_config,\n            parser_loglevel,\n            parser_nd_domain,\n            parser_nd_ip4,\n            parser_nd_password,\n            parser_nd_username,\n        ],\n        description=\"DESCRIPTION: Delete a network.\",\n    )\n    return parser.parse_args()\n\n\nargs = setup_parser()\n\n\nNdfcPythonLogger()\nlog = logging.getLogger(\"ndfc_python.main\")\nlog.setLevel = args.loglevel\n\ntry:\n    ndfc_sender = NdfcPythonSender()\n    ndfc_sender.args = args\n    ndfc_sender.commit()\nexcept ValueError as error:\n    msg = f\"Exiting.  Error detail: {error}\"\n    log.error(msg)\n    print(msg)\n    sys.exit(1)\n\ntry:\n    ndfc_config = NdfcPythonConfig()\n    ndfc_config.filename = args.config\n    ndfc_config.commit()\n    config = ndfc_config.contents[\"config\"]\nexcept ValueError as error:\n    msg = f\"Exiting: Error detail: {error}\"\n    log.error(msg)\n    print(msg)\n    sys.exit(1)\n\nrest_send = RestSend({})\nrest_send.sender = ndfc_sender.sender\nrest_send.response_handler = ResponseHandler()\n\ntry:\n    instance = NetworkDelete()\n    instance.rest_send = rest_send\n    instance.results = Results()\n    instance.fabric_name = config.get(\"fabric_name\")\n    instance.network_name = config.get(\"network_name\")\n    instance.commit()\nexcept ValueError as error:\n    msg = \"Error deleting network. \"\n    msg += f\"Error detail: {error}\"\n    log.error(msg)\n    print(msg)\n    sys.exit(1)\n\nmsg = f\"Network {config.get('network_name')} \"\nmsg += f\"deleted from fabric {config.get('fabric_name')}\"\nprint(msg)\n</code></pre>"},{"location":"classes/Reachability/","title":"Reachability","text":""},{"location":"classes/Reachability/#description","title":"Description","text":"<p>Retrieve reachability information for a switch.</p>"},{"location":"classes/Reachability/#raises","title":"Raises","text":""},{"location":"classes/Reachability/#valueerror","title":"<code>ValueError</code>","text":"<ul> <li><code>fabric_name</code> does not exist on the controller.</li> <li><code>nxos_password</code> is not set prior to calling <code>commit</code>.</li> <li><code>nxos_username</code> is not set prior to calling <code>commit</code>.</li> <li><code>rest_send</code> is not set prior to calling <code>commit</code>.</li> <li><code>results</code> is not set prior to calling <code>commit</code>.</li> <li><code>seed_ip</code> does not exist in fabric <code>fabric_name</code>.</li> <li>An error occurred when sending the <code>POST</code> request to the controller.</li> </ul>"},{"location":"classes/Reachability/#properties","title":"Properties","text":""},{"location":"classes/Reachability/#mandatory","title":"Mandatory","text":""},{"location":"classes/Reachability/#fabric_name","title":"fabric_name","text":"<p>The name of the fabric containing the switch for which reachability information is requested.</p> <ul> <li>default: None</li> <li>example: MyFabric</li> <li>type: str</li> </ul>"},{"location":"classes/Reachability/#nxos_password","title":"nxos_password","text":"<p>The password for NX-OS switches in the fabric. The controller refers to this as the discovery password.</p> <ul> <li>default: None</li> <li>example: MyNxosPassword</li> <li>type: str</li> </ul>"},{"location":"classes/Reachability/#nxos_username","title":"nxos_username","text":"<p>The username for NX-OS switches in the fabric. The controller refers to this as the discovery username.</p> <ul> <li>default: None</li> <li>example: admin</li> <li>type: str</li> </ul>"},{"location":"classes/Reachability/#seed_ip","title":"seed_ip","text":"<p>The ipv4 address of the switch for which reachability information is requested.</p> <ul> <li>default: None</li> <li>example: 10.1.1.2</li> <li>type: str</li> </ul>"},{"location":"classes/Reachability/#optional","title":"Optional","text":"<p>None</p>"},{"location":"classes/Reachability/#example-script","title":"Example script","text":"<p>See examples/reachability.py</p>"},{"location":"classes/overview/","title":"Classes","text":"<p>As we work to modify code in the <code>ansible-dcnm</code> repository to remove direct dependencies on Ansible, we will leverage that code here.  <code>ndfc-python</code> serves secondarily as a testing ground for new code that may eventually find its way into <code>ansible-dcnm</code>.  The code behind the <code>dcnm_network</code>, <code>dcnm_vrf</code>, and <code>dcnm_policy</code> Ansible modules is currently tied at the hip to Ansible, so we are currently unable to leverage it.  We're using the libraries below for now.</p> <p><code>*</code> indicates that a class has not yet been updated to work with RestSend().</p> Library Description CredentialsAnsibleVault Read an Ansible Vault and provide properties for credentials Log Create the base ndfc_python logging object NdfcDiscover Discover device NdfcPolicy <code>*</code> Create / delete policies NdfcPythonLogger Configure logging for <code>ndfc-python</code> scripts NdfcPythonSender Instantiate and configure the Sender() class NetworkCreate Create networks NetworkDelete Delete networks Reachability Switch reachability information (from controller perspective). ReadConfig Returns the contents of a YAML file as a dictionary, given a path to the file VrfCreate Create VRFs Validations Validation methods used by the other classes (deprecated) YamlReader Read a YAML file and return its contents as a python dict"},{"location":"scripts/bootflash_files_delete/","title":"bootflash_files_delete.py","text":""},{"location":"scripts/bootflash_files_delete/#description","title":"Description","text":"<p>Delete files from flash devices on one or more switches.</p>"},{"location":"scripts/bootflash_files_delete/#configuration-parameters","title":"Configuration parameters","text":""},{"location":"scripts/bootflash_files_delete/#targets","title":"targets","text":"<p>A list of dictionaries containing the keys <code>filepath</code> and <code>supervisor</code></p>"},{"location":"scripts/bootflash_files_delete/#filepath","title":"filepath","text":"<p>Can be any file glob (obviously, some are dangerous!).</p>"},{"location":"scripts/bootflash_files_delete/#filepath-examples","title":"filepath examples","text":""},{"location":"scripts/bootflash_files_delete/#txt","title":"*:/*.txt","text":"<p>Delete all <code>.txt</code> files from all flash devices on the specified supervisor</p>"},{"location":"scripts/bootflash_files_delete/#bootflash202411log","title":"bootflash:/202411??.log","text":"<p>Delete all log files whose name implies dates in Nov 2024.</p>"},{"location":"scripts/bootflash_files_delete/#supervisor","title":"supervisor","text":"<p>The supervisor containing the filepath.  One of <code>active</code> or <code>standby</code>.</p>"},{"location":"scripts/bootflash_files_delete/#switches","title":"switches","text":"<p>A list of switch ipv4 addresses.</p>"},{"location":"scripts/bootflash_files_delete/#example-configuration-file","title":"Example configuration file","text":"<p>The configuration below deletes all files with <code>.log</code> and <code>.yaml</code> extensions from the bootflash device on the active supervisor of switches 10.1.1.2 and 10.1.1.3.</p> <p>The configuration file structure is identical to bootflash_files_info</p> config/config_bootflash_files_delete.yaml<pre><code>---\nconfig:\n  targets:\n    - filepath: bootflash:/*.log\n      supervisor: active\n    - filepath: bootflash:/*.yaml\n      supervisor: active\n  switches:\n  - ip_address: 10.1.1.2\n  - ip_address: 10.1.1.3\n</code></pre>"},{"location":"scripts/bootflash_files_delete/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./bootflash_files_delete.py --config config/config_bootflash_files_delete.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/bootflash_files_delete/#example-output","title":"Example output","text":""},{"location":"scripts/bootflash_files_delete/#files-deleted-successfully","title":"Files deleted successfully","text":"Successful deletion<pre><code>(.venv) arobel@AROBEL-M-G793 examples % ./bootflash_files_delete.py --config prod/config_bootflash_files_delete.yaml\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"10.1.1.2\": [\n                {\n                    \"date\": \"2024-09-27 18:56:03\",\n                    \"device_name\": \"cvd-1313-leaf\",\n                    \"filepath\": \"bootflash:/log_profile.yaml\",\n                    \"ip_address\": \"10.1.1.2\",\n                    \"serial_number\": \"FDO123456AB\",\n                    \"size\": \"2566\",\n                    \"supervisor\": \"active\"\n                }\n            ],\n            \"10.1.1.3\": [\n                {\n                    \"date\": \"2024-09-27 18:56:14\",\n                    \"device_name\": \"cvd-1314-leaf\",\n                    \"filepath\": \"bootflash:/log_profile.yaml\",\n                    \"ip_address\": \"10.1.1.3\",\n                    \"serial_number\": \"FDO123456BC\",\n                    \"size\": \"2468\",\n                    \"supervisor\": \"active\"\n                }\n            ],\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"bootflash_delete\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"deleted\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"File(s) Deleted Successfully. \\nDeleted files: [log_profile.yaml][log_profile.yaml]\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"DELETE\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/imagemgnt/bootFlash/bootflash-files\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/bootflash_files_delete/#switch-does-not-exist-on-the-controller","title":"Switch does not exist on the controller","text":"Switch does not exist on the controller<pre><code>(.venv) arobel@AROBEL-M-G793 examples % ./bootflash_files_delete.py --config config/config_bootflash_files_delete.yaml\nExiting.  Error detail: BootflashInfo.refresh_bootflash_info: serial_number not found for switch 10.1.1.2. Error detail SwitchDetails._get: Switch with ip_address 10.1.1.2 does not exist on the controller.\n(.venv) arobel@AROBEL-M-G793 examples %\n</code></pre>"},{"location":"scripts/bootflash_files_delete/#files-not-found","title":"Files not found","text":"Files not found<pre><code>(.venv) arobel@AROBEL-M-G793 examples % ./bootflash_files_delete.py --config prod/config_bootflash_files_delete.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"bootflash_delete\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"deleted\"\n        }\n    ],\n    \"response\": [\n        {\n            \"MESSAGE\": \"No files to delete.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/bootflash_files_info/","title":"bootflash_files_info.py","text":""},{"location":"scripts/bootflash_files_info/#description","title":"Description","text":"<p>List files from flash devices on one or more switches.</p>"},{"location":"scripts/bootflash_files_info/#configuration-parameters","title":"Configuration parameters","text":""},{"location":"scripts/bootflash_files_info/#targets","title":"targets","text":"<p>A list of dictionaries containing the keys <code>filepath</code> and <code>supervisor</code></p>"},{"location":"scripts/bootflash_files_info/#filepath","title":"filepath","text":"<p>Can be any file glob (obviously, some are dangerous!).</p>"},{"location":"scripts/bootflash_files_info/#filepath-examples","title":"filepath examples","text":""},{"location":"scripts/bootflash_files_info/#txt","title":"*:/*.txt","text":"<p>List all <code>.txt</code> files from all flash devices on the specified supervisor</p>"},{"location":"scripts/bootflash_files_info/#bootflash202411log","title":"bootflash:/202411??.log","text":"<p>List all log files whose name implies dates in Nov 2024.</p>"},{"location":"scripts/bootflash_files_info/#supervisor","title":"supervisor","text":"<p>The supervisor containing the filepath.  One of <code>active</code> or <code>standby</code>.</p>"},{"location":"scripts/bootflash_files_info/#switches","title":"switches","text":"<p>A list of switch ipv4 addresses.</p>"},{"location":"scripts/bootflash_files_info/#example-configuration-file","title":"Example configuration file","text":"<p>The configuration below lists all files with <code>.log</code> and <code>.yaml</code> extensions from the bootflash device on the active supervisor of switches 10.1.1.2 and 10.1.1.3.</p> <p>The configuration file structure is identical to delete</p> config/config_bootflash_files_info.yaml<pre><code>---\nconfig:\n  targets:\n    - filepath: bootflash:/*.log\n      supervisor: active\n    - filepath: bootflash:/*.yaml\n      supervisor: active\n  switches:\n  - ip_address: 10.1.1.2\n  - ip_address: 10.1.1.3\n</code></pre>"},{"location":"scripts/bootflash_files_info/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./bootflash_files_info.py --config config/config_bootflash_files_info.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/bootflash_files_info/#example-output","title":"Example output","text":""},{"location":"scripts/bootflash_files_info/#files-searched-successfully","title":"Files searched successfully","text":"Successful search<pre><code>(.venv) arobel@AROBEL-M-G793 examples % ./bootflash_files_info.py --config prod/config_bootflash_files_info.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"10.1.1.2\": [\n                {\n                    \"date\": \"2024-03-01 01:04:02\",\n                    \"device_name\": \"cvd-1312-leaf\",\n                    \"filepath\": \"bootflash:/20240301_010220_poap_19786_init.log\",\n                    \"ip_address\": \"10.1.1.2\",\n                    \"serial_number\": \"FDO123456AB\",\n                    \"size\": \"88497\",\n                    \"supervisor\": \"active\"\n                },\n                {\n                    \"date\": \"2024-06-18 22:52:55\",\n                    \"device_name\": \"cvd-1312-leaf\",\n                    \"filepath\": \"bootflash:/20240618_225115_poap_29865_init.log\",\n                    \"ip_address\": \"10.1.1.2\",\n                    \"serial_number\": \"FDO123456AB\",\n                    \"size\": \"127820\",\n                    \"supervisor\": \"active\"\n                },\n                {\n                    \"date\": \"2024-06-18 22:52:23\",\n                    \"device_name\": \"cvd-1312-leaf\",\n                    \"filepath\": \"bootflash:/poap_retry_debugs.log\",\n                    \"ip_address\": \"10.1.1.2\",\n                    \"serial_number\": \"FDO123456AB\",\n                    \"size\": \"188\",\n                    \"supervisor\": \"active\"\n                },\n                {\n                    \"date\": \"2024-09-27 18:56:09\",\n                    \"device_name\": \"cvd-1312-leaf\",\n                    \"filepath\": \"bootflash:/log_profile.yaml\",\n                    \"ip_address\": \"10.1.1.2\",\n                    \"serial_number\": \"FDO123456AB\",\n                    \"size\": \"2566\",\n                    \"supervisor\": \"active\"\n                }\n            ],\n            \"10.1.1.3\": [\n                {\n                    \"date\": \"2024-09-27 18:56:03\",\n                    \"device_name\": \"cvd-1313-leaf\",\n                    \"filepath\": \"bootflash:/log_profile.yaml\",\n                    \"ip_address\": \"10.1.1.3\",\n                    \"serial_number\": \"FDO123456BC\",\n                    \"size\": \"2566\",\n                    \"supervisor\": \"active\"\n                }\n            ],\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"bootflash_info\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"query\"\n        }\n    ],\n    \"response\": [\n        {\n            \"10.1.1.2\": {\n                \"DATA\": {\n                    \"bootFlashDataMap\": {\n                        \"bootflash:\": [\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jul 11 23:57:59 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \".rpmstore/\",\n                                \"filePath\": \"bootflash:.rpmstore/\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Mar 01 01:04:02 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"20240301_010220_poap_19786_init.log\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"88497\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jun 18 22:52:55 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"20240618_225115_poap_29865_init.log\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"127820\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Apr 11 17:09:22 2017\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"home/\",\n                                \"filePath\": \"bootflash:home/\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Sep 27 18:56:09 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"log_profile.yaml\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"2566\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jul 20 20:50:16 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"lost+found/\",\n                                \"filePath\": \"bootflash:lost+found/\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jun 18 22:52:23 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"poap_retry_debugs.log\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"188\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jul 11 23:59:10 2024\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"scripts/\",\n                                \"filePath\": \"bootflash:scripts/\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Dec 21 01:22:41 2022\",\n                                \"deviceName\": \"cvd-1312-leaf\",\n                                \"fileName\": \"nxos64-cs.10.3.2.F.bin\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.2\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456AB\",\n                                \"size\": \"2297351168\"\n                            }\n                        ]\n                    },\n                    \"bootFlashSpaceMap\": {\n                        \"bootflash:\": {\n                            \"bootflash_type\": \"active\",\n                            \"deviceName\": \"cvd-1312-leaf\",\n                            \"freeSpace\": 46660952064,\n                            \"ipAddr\": \" 10.1.1.2\",\n                            \"name\": \"bootflash:\",\n                            \"serialNumber\": \"FDO123456AB\",\n                            \"totalSpace\": 53532012544,\n                            \"usedSpace\": 6871060480\n                        }\n                    },\n                    \"partitions\": [\n                        \"bootflash:\"\n                    ],\n                    \"requiredSpace\": \"NA\"\n                },\n                \"MESSAGE\": \"OK\",\n                \"METHOD\": \"GET\",\n                \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/imagemgnt/bootFlash/bootflash-info?serialNumber=FDO123456AB\",\n                \"RETURN_CODE\": 200\n            },\n            \"10.1.1.3\": {\n                \"DATA\": {\n                    \"bootFlashDataMap\": {\n                        \"bootflash:\": [\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jul 07 01:20:19 2024\",\n                                \"deviceName\": \"cvd-1313-leaf\",\n                                \"fileName\": \".rpmstore/\",\n                                \"filePath\": \"bootflash:.rpmstore/\",\n                                \"ipAddr\": \" 10.1.1.3\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456BC\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Apr 11 17:12:36 2017\",\n                                \"deviceName\": \"cvd-1313-leaf\",\n                                \"fileName\": \"home/\",\n                                \"filePath\": \"bootflash:home/\",\n                                \"ipAddr\": \" 10.1.1.3\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456BC\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Sep 27 18:56:03 2024\",\n                                \"deviceName\": \"cvd-1313-leaf\",\n                                \"fileName\": \"log_profile.yaml\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.3\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456BC\",\n                                \"size\": \"2566\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Jul 20 20:50:16 2024\",\n                                \"deviceName\": \"cvd-1313-leaf\",\n                                \"fileName\": \"lost+found/\",\n                                \"filePath\": \"bootflash:lost+found/\",\n                                \"ipAddr\": \" 10.1.1.3\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456BC\",\n                                \"size\": \"0\"\n                            },\n                            {\n                                \"bootflash_type\": \"active\",\n                                \"date\": \"Dec 21 02:23:18 2022\",\n                                \"deviceName\": \"cvd-1313-leaf\",\n                                \"fileName\": \"nxos64-cs.10.3.2.F.bin\",\n                                \"filePath\": \"bootflash:\",\n                                \"ipAddr\": \" 10.1.1.3\",\n                                \"name\": \"bootflash:\",\n                                \"serialNumber\": \"FDO123456BC\",\n                                \"size\": \"2297351168\"\n                            }\n                        ]\n                    },\n                    \"bootFlashSpaceMap\": {\n                        \"bootflash:\": {\n                            \"bootflash_type\": \"active\",\n                            \"deviceName\": \"cvd-1313-leaf\",\n                            \"freeSpace\": 46457872384,\n                            \"ipAddr\": \" 10.1.1.3\",\n                            \"name\": \"bootflash:\",\n                            \"serialNumber\": \"FDO123456BC\",\n                            \"totalSpace\": 53532012544,\n                            \"usedSpace\": 7074140160\n                        }\n                    },\n                    \"partitions\": [\n                        \"bootflash:\"\n                    ],\n                    \"requiredSpace\": \"NA\"\n                },\n                \"MESSAGE\": \"OK\",\n                \"METHOD\": \"GET\",\n                \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/imagemgnt/bootFlash/bootflash-info?serialNumber=FDO123456BC\",\n                \"RETURN_CODE\": 200\n            },\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"10.1.1.2\": {\n                \"found\": true,\n                \"success\": true\n            },\n            \"10.1.1.3\": {\n                \"found\": true,\n                \"success\": true\n            },\n            \"sequence_number\": 1\n        }\n    ]\n}\n(.venv) arobel@AROBEL-M-G793 examples %\n</code></pre>"},{"location":"scripts/bootflash_files_info/#switch-does-not-exist-on-the-controller","title":"Switch does not exist on the controller","text":"Switch does not exist on the controller<pre><code>(.venv) arobel@AROBEL-M-G793 examples % ./bootflash_files_info.py --config config/config_bootflash_files_info.yaml\nExiting.  Error detail: BootflashInfo.refresh_bootflash_info: serial_number not found for switch 10.1.1.2. Error detail SwitchDetails._get: Switch with ip_address 10.1.1.2 does not exist on the controller.\n(.venv) arobel@AROBEL-M-G793 examples %\n</code></pre>"},{"location":"scripts/bootflash_files_info/#files-not-found","title":"Files not found","text":"Files not found<pre><code>(.venv) arobel@AROBEL-M-G793 examples % ./bootflash_files_info.py --config prod/config_bootflash_files_info.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"10.1.1.2\": [],\n            \"10.1.1.3\": [],\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"bootflash_info\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"query\"\n        }\n    ],\n    \"response\": [\n        {\n            \"10.1.1.2\": {\n                \"DATA\": {\n                    \"bootFlashDataMap\": {\n                        \"bootflash:\": [\"OUTPUT REMOVED FOR BREVITY\"]\n                    },\n                    \"bootFlashSpaceMap\": {\n                        \"bootflash:\": {\n                            \"bootflash_type\": \"active\",\n                            \"deviceName\": \"cvd-1312-leaf\",\n                            \"freeSpace\": 46660952064,\n                            \"ipAddr\": \" 10.1.1.2\",\n                            \"name\": \"bootflash:\",\n                            \"serialNumber\": \"FDO123456AB\",\n                            \"totalSpace\": 53532012544,\n                            \"usedSpace\": 6871060480\n                        }\n                    },\n                    \"partitions\": [\n                        \"bootflash:\"\n                    ],\n                    \"requiredSpace\": \"NA\"\n                },\n                \"MESSAGE\": \"OK\",\n                \"METHOD\": \"GET\",\n                \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/imagemgnt/bootFlash/bootflash-info?serialNumber=FDO123456AB\",\n                \"RETURN_CODE\": 200\n            },\n            \"10.1.1.3\": {\n                \"DATA\": {\n                    \"bootFlashDataMap\": {\n                        \"bootflash:\": [\"OUTPUT REMOVED FOR BREVITY\"]\n                    },\n                    \"bootFlashSpaceMap\": {\n                        \"bootflash:\": {\n                            \"bootflash_type\": \"active\",\n                            \"deviceName\": \"cvd-1313-leaf\",\n                            \"freeSpace\": 46457872384,\n                            \"ipAddr\": \" 10.1.1.3\",\n                            \"name\": \"bootflash:\",\n                            \"serialNumber\": \"FDO123456BC\",\n                            \"totalSpace\": 53532012544,\n                            \"usedSpace\": 7074140160\n                        }\n                    },\n                    \"partitions\": [\n                        \"bootflash:\"\n                    ],\n                    \"requiredSpace\": \"NA\"\n                },\n                \"MESSAGE\": \"OK\",\n                \"METHOD\": \"GET\",\n                \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/imagemgnt/bootFlash/bootflash-info?serialNumber=FDO123456BC\",\n                \"RETURN_CODE\": 200\n            },\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"10.1.1.2\": {\n                \"found\": true,\n                \"success\": true\n            },\n            \"10.1.1.3\": {\n                \"found\": true,\n                \"success\": true\n            },\n            \"sequence_number\": 1\n        }\n    ]\n}\n(.venv) arobel@AROBEL-M-G793 examples %\n</code></pre>"},{"location":"scripts/config_deploy/","title":"config_deploy.py","text":""},{"location":"scripts/config_deploy/#description","title":"Description","text":"<p>Issue a Config Deploy against one or more fabrics.</p>"},{"location":"scripts/config_deploy/#notes","title":"Notes","text":"<p>You should execute <code>config_save.py</code> on the target fabric(s) before running this script.</p>"},{"location":"scripts/config_deploy/#example-configuration-file","title":"Example configuration file","text":"<p>Note, if you are running this script in a multi-site environment, always list the child fabrics first, followed by the parent fabric.</p> <p>The example below shows this scenario.</p> config/config_config_deploy.yaml<pre><code>---\nconfig:\n  - fabric_name: ChildFabric1\n  - fabric_name: ChildFabric2\n  - fabric_name: MSDFabric\n</code></pre>"},{"location":"scripts/config_deploy/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./config_deploy.py --config config/config_config_deploy.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/config_deploy/#example-output","title":"Example output","text":""},{"location":"scripts/config_deploy/#success","title":"Success","text":"Config Deploy Succeeded<pre><code>(ndfc-python) arobel@Allen-M4 examples % ./config_deploy.py --config config/config_config_deploy.yaml\nTriggered Config Deploy for fabric 'SITE2':\n{\n    \"RETURN_CODE\": 200,\n    \"DATA\": {\n        \"status\": \"Configuration deployment completed for fabric [SITE2].\"\n    },\n    \"MESSAGE\": \"OK\",\n    \"METHOD\": \"POST\",\n    \"REQUEST_PATH\": \"https://192.168.7.7/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/SITE2/config-deploy?forceShowRun=false\"\n}\nTriggered Config Deploy for fabric 'MSD':\n{\n    \"RETURN_CODE\": 200,\n    \"DATA\": {\n        \"status\": \"Configuration deployment completed for fabric [MSD].\"\n    },\n    \"MESSAGE\": \"OK\",\n    \"METHOD\": \"POST\",\n    \"REQUEST_PATH\": \"https://192.168.7.7/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MSD/config-deploy?forceShowRun=false\"\n}\n(ndfc-python) arobel@Allen-M4 examples %\n</code></pre>"},{"location":"scripts/config_deploy/#failure","title":"Failure","text":"<p>TODO: Add failure case.</p>"},{"location":"scripts/config_save/","title":"config_save.py","text":""},{"location":"scripts/config_save/#description","title":"Description","text":"<p>Save pending configurations for one or more fabrics.</p>"},{"location":"scripts/config_save/#example-configuration-file","title":"Example configuration file","text":"<p>Note, if you are running this script in a multi-site environment, always list the child fabrics first, followed by the parent fabric.</p> <p>The example below shows this scenario.</p> config/config_config_save.yaml<pre><code>---\nconfig:\n  - fabric_name: ChildFabric1\n  - fabric_name: ChildFabric2\n  - fabric_name: MSDFabric\n</code></pre>"},{"location":"scripts/config_save/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./config_save.py --config config/config_config_save.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/config_save/#example-output","title":"Example output","text":""},{"location":"scripts/config_save/#success","title":"Success","text":"Configurations saved successfully<pre><code>(ndfc-python) arobel@Allen-M4 examples % ./config_save.py --config test_config_save.yaml --loglevel DEBUG\nTriggered Config Save for fabric 'SITE2':\n{\n    \"RETURN_CODE\": 200,\n    \"DATA\": {\n        \"status\": \"Config save is completed\"\n    },\n    \"MESSAGE\": \"OK\",\n    \"METHOD\": \"POST\",\n    \"REQUEST_PATH\": \"https://192.168.7.7/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/SITE2/config-save\"\n}\nTriggered Config Save for fabric 'MSD':\n{\n    \"RETURN_CODE\": 200,\n    \"DATA\": {\n        \"status\": \"Config save is completed\"\n    },\n    \"MESSAGE\": \"OK\",\n    \"METHOD\": \"POST\",\n    \"REQUEST_PATH\": \"https://192.168.7.7/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MSD/config-save\"\n}\n(ndfc-python) arobel@Allen-M4 examples %\n</code></pre>"},{"location":"scripts/config_save/#failure","title":"Failure","text":"<p>TODO: Add failer case</p>"},{"location":"scripts/controller_info/","title":"controller_info.py","text":""},{"location":"scripts/controller_info/#description","title":"Description","text":"<p>Return controller information (version, etc).</p>"},{"location":"scripts/controller_info/#usage","title":"Usage","text":"<ol> <li>See credentials.py for various options to set credentials.</li> <li>Run the script (we're using command-line for credentials below).</li> </ol> <pre><code>./controller_info.py --nd_username admin --nd_password MyPassword --nd_domain local --nd_ip4 10.1.1.1\n</code></pre>"},{"location":"scripts/controller_info/#output","title":"Output","text":"<pre><code>arobel@AROBEL-M-G793 examples % ./controller_version.py --nd-domain local --nd-ip4 10.1.1.1 --nd-password MyPassword --nd-username admin\nController information:\n12.2.2.238      Full version\n12              Major version\n2               Minor version\n2               Patch version\nFalse           Development version\nLAN             Mode\nFalse           Upgrade in progress\nFalse           Media Controller\nFalse           High Availability enabled\nEASYFABRIC      Install\nRaw response:\n{\n    \"dev\": false,\n    \"install\": \"EASYFABRIC\",\n    \"isHaEnabled\": false,\n    \"isMediaController\": false,\n    \"is_upgrade_inprogress\": false,\n    \"mode\": \"LAN\",\n    \"uuid\": \"\",\n    \"version\": \"12.2.2.238\"\n}\n</code></pre>"},{"location":"scripts/credentials/","title":"credentials.py","text":""},{"location":"scripts/credentials/#description","title":"Description","text":"<p>Print the credentials that would be used from the hierarchy of credential sources that <code>ndfc-python</code> scripts traverse.</p>"},{"location":"scripts/credentials/#credentials-hierarchy-and-precedence","title":"Credentials hierarchy and precedence","text":"<p>For details around <code>ndfc-python</code>'s credentials hierarchy and precedence, and the credential names used, see Credentials.</p>"},{"location":"scripts/credentials/#example-usage","title":"Example Usage","text":""},{"location":"scripts/credentials/#mix-of-credential-sources","title":"Mix of credential sources","text":"<p>Below, the <code>NXOS_USERNAME</code> environment variable is set, so its value is used unless overridden by the command line.  In this case, we can omit <code>--nxos-username</code> from the command line.</p> Mix of command line args and enviroment variables<pre><code>(.venv) AROBEL-M-G793% export NXOS_USERNAME=admin\n(.venv) AROBEL-M-G793% ./credentials.py \\\n    --nd-domain local \\\n    --nd-ip4 10.1.1.1 \\\n    --nd-password foo \\\n    --nd-username admin \\\n    --nxos-password bar\nThe following credentials would be used:\n  nd_domain local\n  nd_ip4 10.1.1.1\n  nd_password foo\n  nd_username admin\n  nxos_password bar\n  nxos_username admin\n</code></pre>"},{"location":"scripts/credentials/#overriding-a-lower-precedence-credential","title":"Overriding a lower precedence credential","text":"<p>Below, we override the <code>NXOS_USERNAME</code> environment variable with its corresponding (higher precedence) command line argument:</p> Override environment variable<pre><code>(.venv) AROBEL-M-G793% export NXOS_USERNAME=admin\n(.venv) AROBEL-M-G793% ./credentials.py \\\n    --nd-domain local \\\n    --nd-ip4 10.1.1.1 \\\n    --nd-password foo \\\n    --nd-username admin \\\n    --nxos-password bar \\\n    --nxos-username beeblebrox\nThe following credentials would be used:\n  nd_domain local\n  nd_ip4 10.1.1.1\n  nd_password foo\n  nd_username admin\n  nxos_password bar\n  nxos_username beeblebrox\n</code></pre> <p>Below, we unset <code>NXOS_USERNAME</code> and point to an Ansible Vault file which contains all of the credentials that <code>ndfc-python</code> knows about. The Ansible vault file is the lowest precedence source of credentials but, since we haven't specified any command-line credentials, and no environment variables are set, the Ansible Vault file is used.</p> <p>Notice that the script asks for the Ansible Vault password to that it can read the vault.</p> <pre><code>(.venv) AROBEL-M-G793% unset NXOS_USERNAME\n(.venv) AROBEL-M-G793% ./credentials.py --ansible-vault $HOME/.ansible/vault\nVault password:\nThe following credentials would be used:\n  nd_domain local\n  nd_ip4 10.2.1.1\n  nd_password FooPassword\n  nd_username admin\n  nxos_password BarPassword\n  nxos_username admin\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/credentials/#failure-ansible-vault-missing-expected-content","title":"Failure - Ansible Vault missing expected content","text":"<p>Below, we are pointing <code>--ansible-vault</code> at a file that does not contain the expected credential names.</p> <pre><code>(.venv) AROBEL-M-G793% ./credentials.py --ansible-vault $HOME/.ansible/vault\nVault password:\nCredentialsAnsibleVault.commit: Exiting. ansible_vault is missing key nd_password. vault file: /Users/arobel/.ansible/vault\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/credentials/#failure-ansible-vault-file-is-missing","title":"Failure - Ansible Vault file is missing","text":"<p>Below, we are pointing <code>--ansible-vault</code> at a file that does not exist.</p> <pre><code>(.venv) AROBEL-M-G793% ./credentials.py --ansible-vault /tmp/no_files_here\nVault password:\nCredentialsAnsibleVault.commit: Exiting. Unable to load credentials in  /tmp/no_files_here. Exception detail: Unable to retrieve file contents\nCould not find or access '/tmp/no_files_here' on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/device_info/","title":"device_info.py","text":""},{"location":"scripts/device_info/#description","title":"Description","text":"<p>Returns switch information for one or more switches.</p>"},{"location":"scripts/device_info/#example-configuration-file","title":"Example configuration file","text":"config/config_device_info.yaml<pre><code>---\nconfig:\n  - switch_ip4: 10.1.1.2\n  - switch_ip4: 10.1.1.3\n</code></pre>"},{"location":"scripts/device_info/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./device_info.py --config config/config_device_info.yaml\nipv4_address 10.1.1.2\n  serial_number: FDO123456AB\n  fabric_name: f1\n  status: ok\n  model: N9K-C93180YC-EX\nipv4_address 10.1.1.3\n  serial_number: FDO123456BC\n  fabric_name: f1\n  status: ok\n  model: N9K-C93180YC-EX\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/device_info/#sample-failure-output","title":"Sample failure output","text":""},{"location":"scripts/device_info/#switch-does-not-exist","title":"Switch does not exist","text":"switch does not exist<pre><code>(.venv) AROBEL-M-G793% ./device_info.py --config prod/config_device_info.yaml\nUnable to get switch details. Error details: SwitchDetails._get: Switch with ip_address 10.1.1.2 does not exist on the controller.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/device_info/#invalid-ip-address-in-config-file","title":"Invalid ip address in config file","text":"Invalid switch_ip4 value in --config<pre><code>(.venv) AROBEL-M-G793% ./device_info.py --config prod/config_device_info.yaml\n1 validation error for DeviceInfoConfigValidator\nconfig.0.switch_ip4\n  Input is not a valid IPv4 address [type=ip_v4_address, input_value='foo', input_type=str]\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_create/","title":"fabric_create.py","text":""},{"location":"scripts/fabric_create/#description","title":"Description","text":"<p>Create or update one or more fabrics.</p>"},{"location":"scripts/fabric_create/#example-configuration-file","title":"Example configuration file","text":"<p>Note, for a description of all configuration parameters for all fabric types see dcnm_fabric.</p> config/config_fabric_create.yaml<pre><code>---\nconfig:\n  - FABRIC_NAME: MyFabric\n    FABRIC_TYPE: VXLAN_EVPN\n    BGP_AS: 65002\n    REPLICATION_MODE: Ingress\n    VRF_VLAN_RANGE: 2000-2299\n  - FABRIC_NAME: YourFabric\n    FABRIC_TYPE: LAN_CLASSIC\n</code></pre>"},{"location":"scripts/fabric_create/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./fabric_create.py --config config/config_fabric_create.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/fabric_create/#example-output","title":"Example output","text":""},{"location":"scripts/fabric_create/#fabrics-created-successfully","title":"Fabrics created successfully","text":"Fabrics create success<pre><code>(.venv) AROBEL-M-G793% ./fabric_create.py --config prod/config_fabric_create.yaml\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"BGP_AS\": 65002,\n            \"FABRIC_NAME\": \"MyFabric\",\n            \"REPLICATION_MODE\": \"Ingress\",\n            \"VRF_VLAN_RANGE\": \"2000-2299\",\n            \"sequence_number\": 1\n        },\n        {\n            \"FABRIC_NAME\": \"YourFabric\",\n            \"sequence_number\": 2\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"fabric_create\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"fabric_create\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"removed\": \"for brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MyFabric/Easy_Fabric\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": {\n                \"removed\": \"for brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/YourFabric/LAN_Classic\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_create/#fabrics-already-exist-and-no-changes-are-required","title":"Fabrics already exist, and no changes are required","text":"Fabrics do not require changes<pre><code>(.venv) AROBEL-M-G793% ./fabric_create.py --ansible-vault $HOME/.ansible/vault --config prod/config_fabric_create.yaml\nVault password:\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"fabric_update\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"MESSAGE\": \"No fabrics to update for merged state.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_create/#fabric-already-exists-but-requires-changes-to-align-with-users-config","title":"Fabric already exists, but requires changes to align with user's config","text":"<p>Below, we have changed <code>REPLICATION_MODE</code> and <code>BGP_AS</code> for fabric <code>MyFabric</code> Since <code>SITE_ID</code>, by default, is assigned the value of <code>BGP_AS</code>, we need to change it as well if we want it to be in sync with <code>BGP_AS</code></p> config/config_fabric_create.yaml<pre><code>---\nconfig:\n  - FABRIC_NAME: MyFabric\n    FABRIC_TYPE: VXLAN_EVPN\n    BGP_AS: 65004\n    SITE_ID: 65004\n    REPLICATION_MODE: Multicast\n    VRF_VLAN_RANGE: 2000-2299\n  - FABRIC_NAME: YourFabric\n    FABRIC_TYPE: LAN_CLASSIC\n</code></pre> User config changed some MyFabric parameters<pre><code>{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"BGP_AS\": \"65004\",\n            \"FABRIC_NAME\": \"MyFabric\",\n            \"REPLICATION_MODE\": \"Multicast\",\n            \"SITE_ID\": \"65004\",\n            \"sequence_number\": 1\n        },\n        {\n            \"sequence_number\": 2\n        },\n        {\n            \"sequence_number\": 3\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"fabric_update\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"config_save\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"config_deploy\",\n            \"check_mode\": false,\n            \"sequence_number\": 3,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"removed\": \"for_brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"PUT\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MyFabric/Easy_Fabric\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"MESSAGE\": \"Fabric MyFabric DEPLOY is False or None. Skipping config-save.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        },\n        {\n            \"MESSAGE\": \"FabricConfigDeploy._can_fabric_be_deployed: Fabric MyFabric DEPLOY is False or None. Skipping config-deploy.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 3\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 3,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/fabric_info/","title":"fabric_info.py","text":""},{"location":"scripts/fabric_info/#description","title":"Description","text":"<p>Returns fabric information for one or more fabrics.</p>"},{"location":"scripts/fabric_info/#example-configuration-file","title":"Example configuration file","text":"config/config_fabric_info.yaml<pre><code>---\nconfig:\n  - fabric_name: MyFabric1\n  - fabric_name: MyFabric2\n</code></pre>"},{"location":"scripts/fabric_info/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./fabric_info.py --config config/config_fabric_info.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/fabric_info/#sample-output","title":"Sample output","text":""},{"location":"scripts/fabric_info/#success","title":"Success","text":"<pre><code>(.venv) AROBEL-M-G793% ./fabric_info.py --config prod/config_fabric_info.yaml\n{\n    \"asn\": \"65001\",\n    \"createdOn\": 1722963281113,\n    \"deviceType\": \"n9k\",\n    \"fabricId\": \"FABRIC-3\",\n    \"fabricName\": \"f1\",\n    \"fabricTechnology\": \"VXLANFabric\",\n    \"fabricTechnologyFriendly\": \"VXLAN EVPN\",\n    \"fabricType\": \"Switch_Fabric\",\n    \"fabricTypeFriendly\": \"Switch Fabric\",\n    \"id\": 3,\n    \"modifiedOn\": 1727463769187,\n    \"networkExtensionTemplate\": \"Default_Network_Extension_Universal\",\n    \"networkTemplate\": \"Default_Network_Universal\",\n    \"nvPairs\": {\n        \"AAA_REMOTE_IP_ENABLED\": \"false\",\n        \"AAA_SERVER_CONF\": \"\",\n        \"ACTIVE_MIGRATION\": \"false\",\n        \"ADVERTISE_PIP_BGP\": \"true\",\n        \"ADVERTISE_PIP_ON_BORDER\": \"false\",\n        \"AGENT_INTF\": \"eth0\",\n        \"AGG_ACC_VPC_PO_ID_RANGE\": \"\",\n        \"AI_ML_QOS_POLICY\": \"AI_Fabric_QOS_400G\",\n        \"ALLOW_L3VNI_NO_VLAN\": \"true\",\n        \"ALLOW_L3VNI_NO_VLAN_PREV\": \"true\",\n        \"ALLOW_NXC\": \"true\",\n        \"ALLOW_NXC_PREV\": \"true\",\n        \"ANYCAST_BGW_ADVERTISE_PIP\": \"false\",\n        \"ANYCAST_GW_MAC\": \"2020.0000.00aa\",\n        \"ANYCAST_LB_ID\": \"\",\n        \"ANYCAST_RP_IP_RANGE\": \"\",\n        \"ANYCAST_RP_IP_RANGE_INTERNAL\": \"\",\n        \"AUTO_SYMMETRIC_DEFAULT_VRF\": \"false\",\n        \"AUTO_SYMMETRIC_VRF_LITE\": \"false\",\n        \"AUTO_UNIQUE_VRF_LITE_IP_PREFIX\": \"false\",\n        \"AUTO_UNIQUE_VRF_LITE_IP_PREFIX_PREV\": \"false\",\n        \"AUTO_VRFLITE_IFC_DEFAULT_VRF\": \"false\",\n        \"BANNER\": \"\",\n        \"BFD_AUTH_ENABLE\": \"false\",\n        \"BFD_AUTH_KEY\": \"\",\n        \"BFD_AUTH_KEY_ID\": \"\",\n        \"BFD_ENABLE\": \"false\",\n        \"BFD_ENABLE_PREV\": \"false\",\n        \"BFD_IBGP_ENABLE\": \"false\",\n        \"BFD_ISIS_ENABLE\": \"false\",\n        \"BFD_OSPF_ENABLE\": \"false\",\n        \"BFD_PIM_ENABLE\": \"false\",\n        \"BGP_AS\": \"65001\",\n        \"BGP_AS_PREV\": \"65001\",\n        \"BGP_AUTH_ENABLE\": \"false\",\n        \"BGP_AUTH_KEY\": \"\",\n        \"BGP_AUTH_KEY_TYPE\": \"3\",\n        \"BGP_LB_ID\": \"0\",\n        \"BOOTSTRAP_CONF\": \"\",\n        \"BOOTSTRAP_ENABLE\": \"false\",\n        \"BOOTSTRAP_ENABLE_PREV\": \"false\",\n        \"BOOTSTRAP_MULTISUBNET\": \"#Scope_Start_IP, Scope_End_IP, Scope_Default_Gateway, Scope_Subnet_Prefix\",\n        \"BOOTSTRAP_MULTISUBNET_INTERNAL\": \"\",\n        \"BRFIELD_DEBUG_FLAG\": \"Disable\",\n        \"BROWNFIELD_NETWORK_NAME_FORMAT\": \"Auto_Net_VNI$$VNI$$_VLAN$$VLAN_ID$$\",\n        \"BROWNFIELD_SKIP_OVERLAY_NETWORK_ATTACHMENTS\": \"false\",\n        \"CDP_ENABLE\": \"false\",\n        \"COPP_POLICY\": \"strict\",\n        \"DCI_MACSEC_ALGORITHM\": \"\",\n        \"DCI_MACSEC_CIPHER_SUITE\": \"\",\n        \"DCI_MACSEC_FALLBACK_ALGORITHM\": \"\",\n        \"DCI_MACSEC_FALLBACK_KEY_STRING\": \"\",\n        \"DCI_MACSEC_KEY_STRING\": \"\",\n        \"DCI_SUBNET_RANGE\": \"10.13.0.0/16\",\n        \"DCI_SUBNET_TARGET_MASK\": \"31\",\n        \"DEAFULT_QUEUING_POLICY_CLOUDSCALE\": \"queuing_policy_default_8q_cloudscale\",\n        \"DEAFULT_QUEUING_POLICY_OTHER\": \"queuing_policy_default_other\",\n        \"DEAFULT_QUEUING_POLICY_R_SERIES\": \"queuing_policy_default_r_series\",\n        \"DEFAULT_VRF_REDIS_BGP_RMAP\": \"\",\n        \"DEPLOYMENT_FREEZE\": \"false\",\n        \"DHCP_ENABLE\": \"false\",\n        \"DHCP_END\": \"\",\n        \"DHCP_END_INTERNAL\": \"\",\n        \"DHCP_IPV6_ENABLE\": \"\",\n        \"DHCP_IPV6_ENABLE_INTERNAL\": \"\",\n        \"DHCP_START\": \"\",\n        \"DHCP_START_INTERNAL\": \"\",\n        \"DNS_SERVER_IP_LIST\": \"\",\n        \"DNS_SERVER_VRF\": \"\",\n        \"DOMAIN_NAME_INTERNAL\": \"\",\n        \"ENABLE_AAA\": \"false\",\n        \"ENABLE_AGENT\": \"false\",\n        \"ENABLE_AGG_ACC_ID_RANGE\": \"false\",\n        \"ENABLE_AI_ML_QOS_POLICY\": \"false\",\n        \"ENABLE_AI_ML_QOS_POLICY_FLAP\": \"false\",\n        \"ENABLE_DCI_MACSEC\": \"false\",\n        \"ENABLE_DCI_MACSEC_PREV\": \"false\",\n        \"ENABLE_DEFAULT_QUEUING_POLICY\": \"false\",\n        \"ENABLE_EVPN\": \"true\",\n        \"ENABLE_FABRIC_VPC_DOMAIN_ID\": \"false\",\n        \"ENABLE_FABRIC_VPC_DOMAIN_ID_PREV\": \"false\",\n        \"ENABLE_L3VNI_NO_VLAN\": \"false\",\n        \"ENABLE_MACSEC\": \"false\",\n        \"ENABLE_MACSEC_PREV\": \"false\",\n        \"ENABLE_NETFLOW\": \"false\",\n        \"ENABLE_NETFLOW_PREV\": \"false\",\n        \"ENABLE_NGOAM\": \"true\",\n        \"ENABLE_NXAPI\": \"true\",\n        \"ENABLE_NXAPI_HTTP\": \"true\",\n        \"ENABLE_PBR\": \"false\",\n        \"ENABLE_PVLAN\": \"false\",\n        \"ENABLE_PVLAN_PREV\": \"false\",\n        \"ENABLE_QKD\": \"false\",\n        \"ENABLE_RT_INTF_STATS\": \"false\",\n        \"ENABLE_SGT\": \"false\",\n        \"ENABLE_SGT_PREV\": \"false\",\n        \"ENABLE_TENANT_DHCP\": \"true\",\n        \"ENABLE_TRM\": \"false\",\n        \"ENABLE_TRMv6\": \"false\",\n        \"ENABLE_VPC_PEER_LINK_NATIVE_VLAN\": \"false\",\n        \"ENABLE_VRI_ID_REALLOC\": \"false\",\n        \"EXTRA_CONF_INTRA_LINKS\": \"\",\n        \"EXTRA_CONF_LEAF\": \"\",\n        \"EXTRA_CONF_SPINE\": \"\",\n        \"EXTRA_CONF_TOR\": \"\",\n        \"EXT_FABRIC_TYPE\": \"\",\n        \"FABRIC_INTERFACE_TYPE\": \"p2p\",\n        \"FABRIC_MTU\": \"9216\",\n        \"FABRIC_MTU_PREV\": \"9216\",\n        \"FABRIC_NAME\": \"f1\",\n        \"FABRIC_TYPE\": \"Switch_Fabric\",\n        \"FABRIC_VPC_DOMAIN_ID\": \"\",\n        \"FABRIC_VPC_DOMAIN_ID_PREV\": \"\",\n        \"FABRIC_VPC_QOS\": \"false\",\n        \"FABRIC_VPC_QOS_POLICY_NAME\": \"spine_qos_for_fabric_vpc_peering\",\n        \"FEATURE_PTP\": \"false\",\n        \"FEATURE_PTP_INTERNAL\": \"false\",\n        \"FF\": \"Easy_Fabric\",\n        \"GRFIELD_DEBUG_FLAG\": \"Disable\",\n        \"HD_TIME\": \"180\",\n        \"HOST_INTF_ADMIN_STATE\": \"true\",\n        \"IBGP_PEER_TEMPLATE\": \"\",\n        \"IBGP_PEER_TEMPLATE_LEAF\": \"\",\n        \"IGNORE_CERT\": \"false\",\n        \"INBAND_DHCP_SERVERS\": \"\",\n        \"INBAND_MGMT\": \"false\",\n        \"INBAND_MGMT_PREV\": \"false\",\n        \"INTF_STAT_LOAD_INTERVAL\": \"\",\n        \"IPv6_ANYCAST_RP_IP_RANGE\": \"\",\n        \"IPv6_ANYCAST_RP_IP_RANGE_INTERNAL\": \"\",\n        \"IPv6_MULTICAST_GROUP_SUBNET\": \"\",\n        \"ISIS_AREA_NUM\": \"0001\",\n        \"ISIS_AREA_NUM_PREV\": \"\",\n        \"ISIS_AUTH_ENABLE\": \"false\",\n        \"ISIS_AUTH_KEY\": \"\",\n        \"ISIS_AUTH_KEYCHAIN_KEY_ID\": \"\",\n        \"ISIS_AUTH_KEYCHAIN_NAME\": \"\",\n        \"ISIS_LEVEL\": \"level-2\",\n        \"ISIS_OVERLOAD_ELAPSE_TIME\": \"\",\n        \"ISIS_OVERLOAD_ENABLE\": \"false\",\n        \"ISIS_P2P_ENABLE\": \"false\",\n        \"KME_SERVER_IP\": \"\",\n        \"KME_SERVER_PORT\": \"\",\n        \"L2_HOST_INTF_MTU\": \"9216\",\n        \"L2_HOST_INTF_MTU_PREV\": \"9216\",\n        \"L2_SEGMENT_ID_RANGE\": \"30000-49000\",\n        \"L3VNI_IPv6_MCAST_GROUP\": \"\",\n        \"L3VNI_MCAST_GROUP\": \"\",\n        \"L3_PARTITION_ID_RANGE\": \"50000-59000\",\n        \"LINK_STATE_ROUTING\": \"ospf\",\n        \"LINK_STATE_ROUTING_TAG\": \"UNDERLAY\",\n        \"LINK_STATE_ROUTING_TAG_PREV\": \"UNDERLAY\",\n        \"LOOPBACK0_IPV6_RANGE\": \"\",\n        \"LOOPBACK0_IP_RANGE\": \"10.10.0.0/22\",\n        \"LOOPBACK1_IPV6_RANGE\": \"\",\n        \"LOOPBACK1_IP_RANGE\": \"10.11.0.0/22\",\n        \"MACSEC_ALGORITHM\": \"\",\n        \"MACSEC_CIPHER_SUITE\": \"\",\n        \"MACSEC_FALLBACK_ALGORITHM\": \"\",\n        \"MACSEC_FALLBACK_KEY_STRING\": \"\",\n        \"MACSEC_KEY_STRING\": \"\",\n        \"MACSEC_REPORT_TIMER\": \"\",\n        \"MGMT_GW\": \"\",\n        \"MGMT_GW_INTERNAL\": \"\",\n        \"MGMT_PREFIX\": \"\",\n        \"MGMT_PREFIX_INTERNAL\": \"\",\n        \"MGMT_V6PREFIX\": \"\",\n        \"MGMT_V6PREFIX_INTERNAL\": \"\",\n        \"MPLS_HANDOFF\": \"false\",\n        \"MPLS_ISIS_AREA_NUM\": \"0001\",\n        \"MPLS_ISIS_AREA_NUM_PREV\": \"\",\n        \"MPLS_LB_ID\": \"\",\n        \"MPLS_LOOPBACK_IP_RANGE\": \"\",\n        \"MSO_CONNECTIVITY_DEPLOYED\": \"\",\n        \"MSO_CONTROLER_ID\": \"\",\n        \"MSO_SITE_GROUP_NAME\": \"\",\n        \"MSO_SITE_ID\": \"\",\n        \"MST_INSTANCE_RANGE\": \"\",\n        \"MULTICAST_GROUP_SUBNET\": \"\",\n        \"MVPN_VRI_ID_RANGE\": \"\",\n        \"NETFLOW_EXPORTER_LIST\": \"\",\n        \"NETFLOW_MONITOR_LIST\": \"\",\n        \"NETFLOW_RECORD_LIST\": \"\",\n        \"NETWORK_VLAN_RANGE\": \"2300-2999\",\n        \"NTP_SERVER_IP_LIST\": \"\",\n        \"NTP_SERVER_VRF\": \"\",\n        \"NVE_LB_ID\": \"1\",\n        \"NXAPI_HTTPS_PORT\": \"443\",\n        \"NXAPI_HTTP_PORT\": \"80\",\n        \"NXC_DEST_VRF\": \"management\",\n        \"NXC_PROXY_PORT\": \"8080\",\n        \"NXC_PROXY_SERVER\": \"\",\n        \"NXC_SRC_INTF\": \"\",\n        \"OBJECT_TRACKING_NUMBER_RANGE\": \"100-299\",\n        \"OSPF_AREA_ID\": \"0.0.0.0\",\n        \"OSPF_AUTH_ENABLE\": \"false\",\n        \"OSPF_AUTH_KEY\": \"\",\n        \"OSPF_AUTH_KEY_ID\": \"\",\n        \"OVERLAY_MODE\": \"config-profile\",\n        \"OVERLAY_MODE_PREV\": \"config-profile\",\n        \"OVERWRITE_GLOBAL_NXC\": \"false\",\n        \"PER_VRF_LOOPBACK_AUTO_PROVISION\": \"false\",\n        \"PER_VRF_LOOPBACK_AUTO_PROVISION_PREV\": \"false\",\n        \"PER_VRF_LOOPBACK_AUTO_PROVISION_V6\": \"false\",\n        \"PER_VRF_LOOPBACK_AUTO_PROVISION_V6_PREV\": \"false\",\n        \"PER_VRF_LOOPBACK_IP_RANGE\": \"\",\n        \"PER_VRF_LOOPBACK_IP_RANGE_V6\": \"\",\n        \"PFC_WATCH_INT\": \"\",\n        \"PFC_WATCH_INT_PREV\": \"\",\n        \"PHANTOM_RP_LB_ID1\": \"\",\n        \"PHANTOM_RP_LB_ID2\": \"\",\n        \"PHANTOM_RP_LB_ID3\": \"\",\n        \"PHANTOM_RP_LB_ID4\": \"\",\n        \"PIM_HELLO_AUTH_ENABLE\": \"false\",\n        \"PIM_HELLO_AUTH_KEY\": \"\",\n        \"PM_ENABLE\": \"false\",\n        \"PM_ENABLE_PREV\": \"false\",\n        \"PNP_ENABLE_INTERNAL\": \"\",\n        \"POWER_REDUNDANCY_MODE\": \"ps-redundant\",\n        \"PREMSO_PARENT_FABRIC\": \"\",\n        \"PTP_DOMAIN_ID\": \"\",\n        \"PTP_LB_ID\": \"\",\n        \"PTP_VLAN_ID\": \"\",\n        \"QKD_PROFILE_NAME\": \"\",\n        \"QKD_PROFILE_NAME_PREV\": \"\",\n        \"REPLICATION_MODE\": \"Ingress\",\n        \"ROUTER_ID_RANGE\": \"\",\n        \"ROUTE_MAP_SEQUENCE_NUMBER_RANGE\": \"1-65534\",\n        \"RP_COUNT\": \"2\",\n        \"RP_LB_ID\": \"\",\n        \"RP_MODE\": \"asm\",\n        \"RR_COUNT\": \"2\",\n        \"SEED_SWITCH_CORE_INTERFACES\": \"\",\n        \"SERVICE_NETWORK_VLAN_RANGE\": \"3000-3199\",\n        \"SGT_ID_RANGE\": \"\",\n        \"SGT_NAME_PREFIX\": \"\",\n        \"SGT_OPER_STATUS\": \"off\",\n        \"SGT_PREPROVISION\": \"false\",\n        \"SGT_PREPROVISION_PREV\": \"false\",\n        \"SGT_PREPROV_RECALC_STATUS\": \"empty\",\n        \"SGT_RECALC_STATUS\": \"empty\",\n        \"SITE_ID\": \"65001\",\n        \"SITE_ID_POLICY_ID\": \"\",\n        \"SLA_ID_RANGE\": \"10000-19999\",\n        \"SNMP_SERVER_HOST_TRAP\": \"true\",\n        \"SPINE_COUNT\": \"2\",\n        \"SPINE_SWITCH_CORE_INTERFACES\": \"\",\n        \"SSPINE_ADD_DEL_DEBUG_FLAG\": \"Disable\",\n        \"SSPINE_COUNT\": \"0\",\n        \"STATIC_UNDERLAY_IP_ALLOC\": \"false\",\n        \"STP_BRIDGE_PRIORITY\": \"\",\n        \"STP_ROOT_OPTION\": \"unmanaged\",\n        \"STP_VLAN_RANGE\": \"\",\n        \"STRICT_CC_MODE\": \"false\",\n        \"SUBINTERFACE_RANGE\": \"2-511\",\n        \"SUBNET_RANGE\": \"10.12.0.0/16\",\n        \"SUBNET_TARGET_MASK\": \"31\",\n        \"SYSLOG_SERVER_IP_LIST\": \"\",\n        \"SYSLOG_SERVER_VRF\": \"\",\n        \"SYSLOG_SEV\": \"\",\n        \"TCAM_ALLOCATION\": \"true\",\n        \"TOPDOWN_CONFIG_RM_TRACKING\": \"notstarted\",\n        \"TRUSTPOINT_LABEL\": \"\",\n        \"UNDERLAY_IS_V6\": \"false\",\n        \"UNDERLAY_IS_V6_PREV\": \"false\",\n        \"UNNUM_BOOTSTRAP_LB_ID\": \"\",\n        \"UNNUM_DHCP_END\": \"\",\n        \"UNNUM_DHCP_END_INTERNAL\": \"\",\n        \"UNNUM_DHCP_START\": \"\",\n        \"UNNUM_DHCP_START_INTERNAL\": \"\",\n        \"UPGRADE_FROM_VERSION\": \"\",\n        \"USE_LINK_LOCAL\": \"false\",\n        \"V6_SUBNET_RANGE\": \"\",\n        \"V6_SUBNET_TARGET_MASK\": \"126\",\n        \"VPC_AUTO_RECOVERY_TIME\": \"360\",\n        \"VPC_DELAY_RESTORE\": \"150\",\n        \"VPC_DELAY_RESTORE_TIME\": \"60\",\n        \"VPC_DOMAIN_ID_RANGE\": \"1-1000\",\n        \"VPC_ENABLE_IPv6_ND_SYNC\": \"true\",\n        \"VPC_PEER_KEEP_ALIVE_OPTION\": \"management\",\n        \"VPC_PEER_LINK_PO\": \"500\",\n        \"VPC_PEER_LINK_VLAN\": \"3600\",\n        \"VRF_LITE_AUTOCONFIG\": \"Manual\",\n        \"VRF_VLAN_RANGE\": \"2000-2299\",\n        \"abstract_anycast_rp\": \"anycast_rp\",\n        \"abstract_bgp\": \"base_bgp\",\n        \"abstract_bgp_neighbor\": \"evpn_bgp_rr_neighbor\",\n        \"abstract_bgp_rr\": \"evpn_bgp_rr\",\n        \"abstract_dhcp\": \"base_dhcp\",\n        \"abstract_extra_config_bootstrap\": \"extra_config_bootstrap_11_1\",\n        \"abstract_extra_config_leaf\": \"extra_config_leaf\",\n        \"abstract_extra_config_spine\": \"extra_config_spine\",\n        \"abstract_extra_config_tor\": \"extra_config_tor\",\n        \"abstract_feature_leaf\": \"base_feature_leaf_upg\",\n        \"abstract_feature_spine\": \"base_feature_spine_upg\",\n        \"abstract_isis\": \"base_isis_level2\",\n        \"abstract_isis_interface\": \"isis_interface\",\n        \"abstract_loopback_interface\": \"int_fabric_loopback_11_1\",\n        \"abstract_multicast\": \"base_multicast_11_1\",\n        \"abstract_ospf\": \"base_ospf\",\n        \"abstract_ospf_interface\": \"ospf_interface_11_1\",\n        \"abstract_pim_interface\": \"pim_interface\",\n        \"abstract_route_map\": \"route_map\",\n        \"abstract_routed_host\": \"int_routed_host\",\n        \"abstract_trunk_host\": \"int_trunk_host\",\n        \"abstract_vlan_interface\": \"int_fabric_vlan_11_1\",\n        \"abstract_vpc_domain\": \"base_vpc_domain_11_1\",\n        \"dcnmUser\": \"admin\",\n        \"default_network\": \"Default_Network_Universal\",\n        \"default_pvlan_sec_network\": \"\",\n        \"default_vrf\": \"Default_VRF_Universal\",\n        \"enableRealTimeBackup\": \"\",\n        \"enableScheduledBackup\": \"\",\n        \"network_extension_template\": \"Default_Network_Extension_Universal\",\n        \"scheduledTime\": \"\",\n        \"temp_anycast_gateway\": \"anycast_gateway\",\n        \"temp_vpc_domain_mgmt\": \"vpc_domain_mgmt\",\n        \"temp_vpc_peer_link\": \"int_vpc_peer_link_po\",\n        \"vrf_extension_template\": \"Default_VRF_Extension_Universal\"\n    },\n    \"operStatus\": \"CRITICAL\",\n    \"provisionMode\": \"DCNMTopDown\",\n    \"replicationMode\": \"Ingress\",\n    \"siteId\": \"65001\",\n    \"templateFabricType\": \"Data Center VXLAN EVPN\",\n    \"templateName\": \"Easy_Fabric\",\n    \"vrfExtensionTemplate\": \"Default_VRF_Extension_Universal\",\n    \"vrfTemplate\": \"Default_VRF_Universal\"\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_info/#failure","title":"Failure","text":""},{"location":"scripts/fabric_info/#fabric-does-not-exist","title":"Fabric does not exist","text":"<pre><code>(.venv) AROBEL-M-G793% ./fabric_info.py --config prod/config_fabric_info.yaml\nFabric MyFabric1 does not exist on the controller\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_info/#invalid-credentials","title":"Invalid credentials","text":"<pre><code>(.venv) AROBEL-M-G793% ./fabric_info.py --config prod/config_fabric_info.yaml --nd-username SomeRandomDude\nExiting.  Error detail: NdfcPythonSender.commit: Unable to login to the controller. Error detail: Sender.update_token: Unable to parse token from response: {'RETURN_CODE': 401, 'DATA': {'error': 'Invalid Username/Password'}, 'MESSAGE': 'Unauthorized', 'METHOD': 'POST', 'REQUEST_PATH': 'https://10.1.1.1/login'}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_replace/","title":"fabric_replace.py","text":""},{"location":"scripts/fabric_replace/#description","title":"Description","text":"<p>Replace the configuration for one or more fabrics.</p>"},{"location":"scripts/fabric_replace/#example-configuration-file","title":"Example configuration file","text":"<p>Note, for a description of all configuration parameters for all fabric types see dcnm_fabric.</p> config/config_fabric_replace.yaml<pre><code>---\nconfig:\n  - FABRIC_NAME: MyFabric\n    FABRIC_TYPE: VXLAN_EVPN\n    BGP_AS: 65002\n    REPLICATION_MODE: Ingress\n  - FABRIC_NAME: YourFabric\n    FABRIC_TYPE: LAN_CLASSIC\n    IS_READ_ONLY: False\n</code></pre>"},{"location":"scripts/fabric_replace/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./fabric_replace.py --config config/config_fabric_replace.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/fabric_replace/#example-output","title":"Example output","text":""},{"location":"scripts/fabric_replace/#fabric-configurations-replaced-successfully","title":"Fabric configurations replaced successfully","text":"config/config_fabric_replace.yaml<pre><code>---\nconfig:\n  - FABRIC_NAME: MyFabric\n    FABRIC_TYPE: VXLAN_EVPN\n    BGP_AS: 65002\n    REPLICATION_MODE: Multicast\n  - FABRIC_NAME: YourFabric\n    FABRIC_TYPE: LAN_CLASSIC\n    IS_READ_ONLY: False\n</code></pre> Fabric configuration replace success<pre><code>(.venv) AROBEL-M-G793% ./fabric_replace.py --ansible-vault $HOME/.ansible/vault --config prod/config_fabric_create.yaml\nVault password:\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"FABRIC_NAME\": \"MyFabric\",\n            \"REPLICATION_MODE\": \"Multicast\",\n            \"sequence_number\": 1\n        },\n        {\n            \"FABRIC_NAME\": \"YourFabric\",\n            \"IS_READ_ONLY\": \"false\",\n            \"sequence_number\": 2\n        },\n        {\n            \"sequence_number\": 3\n        },\n        {\n            \"sequence_number\": 4\n        },\n        {\n            \"sequence_number\": 5\n        },\n        {\n            \"sequence_number\": 6\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"fabric_replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"fabric_replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_save\",\n            \"check_mode\": false,\n            \"sequence_number\": 3,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_save\",\n            \"check_mode\": false,\n            \"sequence_number\": 4,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_deploy\",\n            \"check_mode\": false,\n            \"sequence_number\": 5,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_deploy\",\n            \"check_mode\": false,\n            \"sequence_number\": 6,\n            \"state\": \"replaced\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"removed\": \"for brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"PUT\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MyFabric/Easy_Fabric\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": {\n                \"removed\": \"for brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"PUT\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/YourFabric/LAN_Classic\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        },\n        {\n            \"MESSAGE\": \"Fabric MyFabric DEPLOY is False or None. Skipping config-save.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 3\n        },\n        {\n            \"MESSAGE\": \"Fabric YourFabric DEPLOY is False or None. Skipping config-save.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 4\n        },\n        {\n            \"MESSAGE\": \"FabricConfigDeploy._can_fabric_be_deployed: Fabric MyFabric DEPLOY is False or None. Skipping config-deploy.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 5\n        },\n        {\n            \"MESSAGE\": \"FabricConfigDeploy._can_fabric_be_deployed: Fabric YourFabric DEPLOY is False or None. Skipping config-deploy.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 6\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 3,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 4,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 5,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 6,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/fabric_replace/#no-changes-are-required","title":"No changes are required","text":"Fabrics do not require changes<pre><code>(.venv) AROBEL-M-G793% ./fabric_replace.py --ansible-vault $HOME/.ansible/vault --config prod/config_fabric_replace.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"fabric_replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"replaced\"\n        }\n    ],\n    \"response\": [\n        {\n            \"MESSAGE\": \"No fabrics to update for replaced state.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/fabric_replace/#fabric-requires-changes-to-align-with-users-config","title":"Fabric requires changes to align with user's config","text":"<p>Below, we have changed <code>REPLICATION_MODE</code> for <code>MyFabric</code> and <code>IS_READ_ONLY</code> for <code>YourFabric</code></p> config/config_fabric_replace.yaml<pre><code>---\nconfig:\n  - FABRIC_NAME: MyFabric\n    REPLICATION_MODE: Multicast\n    FABRIC_TYPE: VXLAN_EVPN\n    BGP_AS: 65002\n    DEPLOY: False\n  - FABRIC_NAME: YourFabric\n    FABRIC_TYPE: LAN_CLASSIC\n    IS_READ_ONLY: True\n    DEPLOY: False\n</code></pre> User config changed some MyFabric parameters<pre><code>{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"FABRIC_NAME\": \"MyFabric\",\n            \"REPLICATION_MODE\": \"Multicast\",\n            \"sequence_number\": 1\n        },\n        {\n            \"FABRIC_NAME\": \"YourFabric\",\n            \"IS_READ_ONLY\": \"true\",\n            \"sequence_number\": 2\n        },\n        {\n            \"sequence_number\": 3\n        },\n        {\n            \"sequence_number\": 4\n        },\n        {\n            \"sequence_number\": 5\n        },\n        {\n            \"sequence_number\": 6\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"fabric_replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"fabric_replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_save\",\n            \"check_mode\": false,\n            \"sequence_number\": 3,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_save\",\n            \"check_mode\": false,\n            \"sequence_number\": 4,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_deploy\",\n            \"check_mode\": false,\n            \"sequence_number\": 5,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"config_deploy\",\n            \"check_mode\": false,\n            \"sequence_number\": 6,\n            \"state\": \"replaced\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"removed\": \"for brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"PUT\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MyFabric/Easy_Fabric\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": {\n                \"removed\": \"for brevity\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"PUT\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/YourFabric/LAN_Classic\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        },\n        {\n            \"MESSAGE\": \"Fabric MyFabric DEPLOY is False or None. Skipping config-save.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 3\n        },\n        {\n            \"MESSAGE\": \"Fabric YourFabric DEPLOY is False or None. Skipping config-save.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 4\n        },\n        {\n            \"MESSAGE\": \"FabricConfigDeploy._can_fabric_be_deployed: Fabric MyFabric DEPLOY is False or None. Skipping config-deploy.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 5\n        },\n        {\n            \"MESSAGE\": \"FabricConfigDeploy._can_fabric_be_deployed: Fabric YourFabric DEPLOY is False or None. Skipping config-deploy.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 6\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 3,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 4,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 5,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 6,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_create/","title":"image_policy_create.py","text":""},{"location":"scripts/image_policy_create/#description","title":"Description","text":"<p>Create or update one or more image policies.</p>"},{"location":"scripts/image_policy_create/#example-configuration-file","title":"Example configuration file","text":"config/config_image_policy_create.yaml<pre><code>---\nconfig:\n    - name: KR5M\n      agnostic: False\n      description: KR5M\n      epld_image: n9000-epld.10.2.5.M.img\n      packages:\n        install:\n        - cfg_cmp-0.3.1.0-1.x86_64.rpm\n        uninstall:\n        - mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\n      platform: N9K\n      release: 10.2.5_nxos64-cs_64bit\n      type: PLATFORM\n    - name: NR1F\n      description: NR1F\n      platform: N9K\n      epld_image: n9000-epld.10.3.1.F.img\n      release: 10.3.1_nxos64-cs_64bit\n</code></pre>"},{"location":"scripts/image_policy_create/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./image_policy_create.py --config config/config_image_policy_create.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/image_policy_create/#example-output","title":"Example output","text":""},{"location":"scripts/image_policy_create/#image-policies-created-successfully","title":"Image policies created successfully","text":"Image policies create success<pre><code>(.venv) AROBEL-M-G793% ./image_policy_create.py --config prod/config_image_policy_create.yaml\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.2.5.M.img\",\n            \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n            \"packageName\": \"cfg_cmp-0.3.1.0-1.x86_64.rpm\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"KR5M\",\n            \"policyName\": \"KR5M\",\n            \"policyType\": \"PLATFORM\",\n            \"role\": null,\n            \"rpmimages\": \"mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\",            \"sequence_number\": 1\n            \"unInstall\": false\n        },\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.3.1.F.img\",\n            \"nxosVersion\": \"10.3.1_nxos64-cs_64bit\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"NR1F\",\n            \"policyName\": \"NR1F\",\n            \"policyType\": \"PLATFORM\",\n            \"sequence_number\": 2\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"create\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"create\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Policy created successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/platform-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": \"Policy created successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/platform-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_create/#policy-already-exists-but-requires-a-change-to-align-with-users-config","title":"Policy already exists, but requires a change to align with user's config","text":"User config contains a modified description (policyDescr)<pre><code>(.venv) AROBEL-M-G793% ./image_policy_create.py --config prod/config_image_policy_create.yaml\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.2.5.M.img\",\n            \"fabricPolicyName\": null,\n            \"imagePresent\": \"Present\",\n            \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n            \"packageName\": \"cfg_cmp-0.3.1.0-1.x86_64.rpm\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"KR5M-changed\",\n            \"policyName\": \"KR5M\",\n            \"policyType\": \"PLATFORM\",\n            \"role\": null,\n            \"rpmimages\": \"mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\",            \"sequence_number\": 1,\n            \"unInstall\": false\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"update\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Policy updated successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/image_policy_create/#no-changes-to-image-policies-are-required","title":"No changes to image policies are required","text":"Image policies do not require changes<pre><code>(.venv) AROBEL-M-G793% ./image_policy_create.py --config prod/config_image_policy_create.yaml\n{\n    \"changed\": false,\n    \"diff\": [],\n    \"failed\": false,\n    \"metadata\": [],\n    \"response\": [],\n    \"result\": []\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_create/#packagesinstall-is-set-to-a-package-name-that-does-not-exist-on-the-controller","title":"packages.install is set to a package name that does not exist on the controller","text":"Invalid config<pre><code>---\nconfig:\n    - name: KR5M\n      agnostic: False\n      description: KR5M\n      epld_image: n9000-epld.10.2.5.M.img\n      packages:\n        install:\n        - bad_package_name_which_does_not_exist.rpm\n        uninstall:\n        - mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\n      platform: N9K\n      release: 10.2.5_nxos64-cs_64bit\n      type: PLATFORM\n</code></pre> install package does not exist on the controller<pre><code>(.venv) AROBEL-M-G793% ./image_policy_create.py --config prod/config_image_policy_create.yaml\nunable to create/update image policies\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": true,\n    \"metadata\": [\n        {\n            \"action\": \"update\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Invalid Package name(s).\",\n            \"MESSAGE\": \"Internal Server Error\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 500,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": false\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_delete/","title":"image_policy_delete.py","text":""},{"location":"scripts/image_policy_delete/#description","title":"Description","text":"<p>Create or update one or more image policies.</p>"},{"location":"scripts/image_policy_delete/#example-configuration-file","title":"Example configuration file","text":"<p>Delete image policies KR5M and NR1F, if they exist.</p> config/config_image_policy_delete.yaml<pre><code>---\nconfig:\n    - name: KR5M\n    - name: NR1F\n</code></pre>"},{"location":"scripts/image_policy_delete/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./image_policy_delete.py --config config/config_image_policy_delete.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/image_policy_delete/#example-output","title":"Example output","text":""},{"location":"scripts/image_policy_delete/#image-policies-deleted-successfully","title":"Image policies deleted successfully","text":"Image policies delete success<pre><code>{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"policyNames\": [\n                \"KR5M\",\n                \"NR1F\"\n            ],\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"delete\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"deleted\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Selected policy(s) deleted successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"DELETE\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/image_policy_delete/#the-specified-image-policies-do-not-exist","title":"The specified image policies do not exist","text":"Image policies do not exist<pre><code>(.venv) AROBEL-M-G793% ./image_policy_delete.py --config prod/config_image_policy_delete.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"delete\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"deleted\"\n        }\n    ],\n    \"response\": [\n        {\n            \"MESSAGE\": \"No image policies to delete.\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_delete/#one-or-more-image-policies-have-devices-attached","title":"One or more image policies have device(s) attached","text":"Image policies have non-zero ref_count<pre><code>(.venv) AROBEL-M-G793% ./image_policy_delete.py --config prod/config_image_policy_delete.yaml\nExiting.  Error detail: ImagePolicyDelete._get_policies_to_delete: ImagePolicyDelete._verify_image_policy_ref_count: One or more policies have devices attached. Detach these policies from all devices first using the dcnm_image_upgrade module, with state == deleted. policy_name: KR5M, ref_count: 1.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_info/","title":"image_policy_info.py","text":""},{"location":"scripts/image_policy_info/#description","title":"Description","text":"<p>Query one or more image policies by name.</p>"},{"location":"scripts/image_policy_info/#example-configuration-file","title":"Example configuration file","text":"config/config_image_policy_info.yaml<pre><code>---\nconfig:\n    - name: nxos64-cs.10.2.5.M.bin_N9K_All\n    - name: FOO_POLICY\n</code></pre>"},{"location":"scripts/image_policy_info/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.2\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./device_info.py --config config/config_device_info.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/image_policy_info/#example-output","title":"Example output","text":""},{"location":"scripts/image_policy_info/#image-policy-exists-on-the-controller","title":"Image policy exists on the controller","text":"Image policy exists<pre><code>(.venv) AROBEL-M-G793% ./image_policy_info.py --config prod/config_image_policy_info.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"\",\n            \"fabricPolicyName\": \"nxos64-cs.10.2.5.M.bin\",\n            \"imageName\": \"nxos64-cs.10.2.5.M.bin\",\n            \"imagePresent\": \"Present\",\n            \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n            \"packageName\": \"\",\n            \"platform\": \"N9K/N3K\",\n            \"platformPolicies\": \"\",\n            \"policyDescr\": null,\n            \"policyName\": \"nxos64-cs.10.2.5.M.bin_N9K_All\",\n            \"policyType\": \"FABRIC\",\n            \"ref_count\": 0,\n            \"role\": \"All\",\n            \"rpmimages\": \"false\",\n            \"sequence_number\": 1,\n            \"unInstall\": false\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"query\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"query\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"lastOperDataObject\": [\n                    {\n                        \"agnostic\": false,\n                        \"epldImgName\": \"\",\n                        \"fabricPolicyName\": \"nxos64-cs.10.2.5.M.bin\",\n                        \"imageName\": \"nxos64-cs.10.2.5.M.bin\",\n                        \"imagePresent\": \"Present\",\n                        \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n                        \"packageName\": \"\",\n                        \"platform\": \"N9K/N3K\",\n                        \"platformPolicies\": \"\",\n                        \"policyDescr\": null,\n                        \"policyName\": \"nxos64-cs.10.2.5.M.bin_N9K_All\",\n                        \"policyType\": \"FABRIC\",\n                        \"ref_count\": 0,\n                        \"role\": \"All\",\n                        \"rpmimages\": \"false\",\n                        \"unInstall\": false\n                    }\n                ],\n                \"message\": \"\",\n                \"status\": \"SUCCESS\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"GET\",\n            \"REQUEST_PATH\": \"https://10.1.1.2/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/policies\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"found\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_info/#image-policy-does-not-exist-on-the-controller","title":"Image policy does not exist on the controller","text":"Image policy does not exist<pre><code>(.venv) AROBEL-M-G793% ./image_policy_info.py --config prod/config_image_policy_info.yaml --nd-ip4 10.1.1.3\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"query\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"query\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"lastOperDataObject\": [],\n                \"message\": \"\",\n                \"status\": \"SUCCESS\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"GET\",\n            \"REQUEST_PATH\": \"https://10.1.1.3/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/policies\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_info_all/","title":"image_policy_info_all.py","text":""},{"location":"scripts/image_policy_info_all/#description","title":"Description","text":"<p>Returns information about all image policies on the controller.</p>"},{"location":"scripts/image_policy_info_all/#example-configuration-file","title":"Example configuration file","text":"<p>Configuration file is not required.</p>"},{"location":"scripts/image_policy_info_all/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so no arguments are required if credentials are defined as environment variables.</p> <p>See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.2\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./image_policy_info_all.py\n# Output not shown\n</code></pre>"},{"location":"scripts/image_policy_info_all/#example-output","title":"Example output","text":""},{"location":"scripts/image_policy_info_all/#one-or-more-image-policies-exist-on-the-controller","title":"One or more image policies exist on the controller","text":"Successful response<pre><code>(.venv) AROBEL-M-G793% ./image_policy_info_all.py\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"nxos64-cs.10.2.5.M.bin_N9K_All\": {\n                \"agnostic\": false,\n                \"epldImgName\": \"\",\n                \"fabricPolicyName\": \"nxos64-cs.10.2.5.M.bin\",\n                \"imageName\": \"nxos64-cs.10.2.5.M.bin\",\n                \"imagePresent\": \"Present\",\n                \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n                \"packageName\": \"\",\n                \"platform\": \"N9K/N3K\",\n                \"platformPolicies\": \"\",\n                \"policyDescr\": null,\n                \"policyName\": \"nxos64-cs.10.2.5.M.bin_N9K_All\",\n                \"policyType\": \"FABRIC\",\n                \"ref_count\": 0,\n                \"role\": \"All\",\n                \"rpmimages\": \"false\",\n                \"unInstall\": false\n            },\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"query_all_image_policies\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"query\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"lastOperDataObject\": [\n                    {\n                        \"agnostic\": false,\n                        \"epldImgName\": \"\",\n                        \"fabricPolicyName\": \"nxos64-cs.10.2.5.M.bin\",\n                        \"imageName\": \"nxos64-cs.10.2.5.M.bin\",\n                        \"imagePresent\": \"Present\",\n                        \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n                        \"packageName\": \"\",\n                        \"platform\": \"N9K/N3K\",\n                        \"platformPolicies\": \"\",\n                        \"policyDescr\": null,\n                        \"policyName\": \"nxos64-cs.10.2.5.M.bin_N9K_All\",\n                        \"policyType\": \"FABRIC\",\n                        \"ref_count\": 0,\n                        \"role\": \"All\",\n                        \"rpmimages\": \"false\",\n                        \"unInstall\": false\n                    }\n                ],\n                \"message\": \"\",\n                \"status\": \"SUCCESS\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"GET\",\n            \"REQUEST_PATH\": \"https://10.1.1.2/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/policies\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"found\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_info_all/#no-image-policies-exist-on-the-controller","title":"No image policies exist on the controller","text":"No image policies exist<pre><code>(.venv) AROBEL-M-G793% ./image_policy_info_all.py --nd-ip4 10.1.1.3\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"query_all_image_policies\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"query\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"lastOperDataObject\": [],\n                \"message\": \"\",\n                \"status\": \"SUCCESS\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"GET\",\n            \"REQUEST_PATH\": \"https://10.1.1.3/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/policies\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"found\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_override/","title":"image_policy_override.py","text":""},{"location":"scripts/image_policy_override/#description","title":"Description","text":"<p>Override the image policies on the controller with the image policies in the configuration file.</p> <p>Any image policies on the controller that are not in the configuration file will be deleted.  Any image policies that on the controller and are in the configuration will be replaced with the image policies in the configuration.</p> <p>Use this script when you want the controller configuration to exactly match the script configuration.</p>"},{"location":"scripts/image_policy_override/#example-configuration-file","title":"Example configuration file","text":"config/config_image_policy_override.yaml<pre><code>---\nconfig:\n    - name: KR5M\n      agnostic: False\n      description: KR5M\n      epld_image: n9000-epld.10.2.5.M.img\n      platform: N9K\n      release: 10.2.5_nxos64-cs_64bit\n      type: PLATFORM\n    - name: NR1F\n      description: NR1F\n      platform: N9K\n      epld_image: n9000-epld.10.3.1.F.img\n      release: 10.3.1_nxos64-cs_64bit\n</code></pre>"},{"location":"scripts/image_policy_override/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./image_policy_override.py --config config/config_image_policy_override.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/image_policy_override/#example-output","title":"Example output","text":""},{"location":"scripts/image_policy_override/#image-policy-configurations-overridden-successfully","title":"Image policy configurations overridden successfully","text":"<p>Below, an image policy on the controller (<code>FOO_DELETE_ME</code>) is deleted since it is not represented in the configuration file.</p> <p>Image policies <code>KR5M</code> and <code>NR1F</code> on the controller are updated to match the configuration file.</p> Successful execution<pre><code>(.venv) AROBEL-M-G793% ./image_policy_override.py --config prod/config_image_policy_override.yaml\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"policyNames\": [\n                \"FOO_DELETE_ME\"\n            ],\n            \"sequence_number\": 1\n        },\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.2.5.M.img\",\n            \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n            \"packageName\": \"\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"KR5M\",\n            \"policyName\": \"KR5M\",\n            \"policyType\": \"PLATFORM\",\n            \"rpmimages\": \"\",\n            \"sequence_number\": 2\n        },\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.3.1.F.img\",\n            \"nxosVersion\": \"10.3.1_nxos64-cs_64bit\",\n            \"packageName\": \"\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"NR1F\",\n            \"policyName\": \"NR1F\",\n            \"policyType\": \"PLATFORM\",\n            \"rpmimages\": \"\",\n            \"sequence_number\": 3\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"delete\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"overridden\"\n        },\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"overridden\"\n        },\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 3,\n            \"state\": \"overridden\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Selected policy(s) deleted successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"DELETE\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": \"Policy updated successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        },\n        {\n            \"DATA\": \"Policy updated successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 3\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 3,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/image_policy_override/#packagesinstall-for-image-policy-is-set-to-a-package-name-that-does-not-exist-on-the-controller","title":"packages.install for image policy is set to a package name that does not exist on the controller","text":"Invalid config<pre><code>---\nconfig:\n    - name: KR5M\n      agnostic: False\n      description: KR5M\n      epld_image: n9000-epld.10.2.5.M.img\n      packages:\n        install:\n        - bad_package_name_which_does_not_exist.rpm\n        uninstall:\n        - mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\n      platform: N9K\n      release: 10.2.5_nxos64-cs_64bit\n      type: PLATFORM\n    - name: NR1F\n      description: NR1F\n      platform: N9K\n      epld_image: n9000-epld.10.3.1.F.img\n      release: 10.3.1_nxos64-cs_64bit\n</code></pre> install package does not exist on the controller<pre><code>(.venv) AROBEL-M-G793% ./image_policy_override.py --config prod/config_image_policy_override.yaml\nunable to override one or more image policies\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        },\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.3.1.F.img\",\n            \"nxosVersion\": \"10.3.1_nxos64-cs_64bit\",\n            \"packageName\": \"\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"NR1F\",\n            \"policyName\": \"NR1F\",\n            \"policyType\": \"PLATFORM\",\n            \"rpmimages\": \"\",\n            \"sequence_number\": 2\n        }\n    ],\n    \"failed\": true,\n    \"metadata\": [\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"overridden\"\n        },\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"overridden\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Invalid Package name(s).\",\n            \"MESSAGE\": \"Internal Server Error\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 500,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": \"Policy updated successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": false\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        }\n    ]\n}\n(.venv) arobel@AROBEL-M-G793 examples %\n</code></pre>"},{"location":"scripts/image_policy_replace/","title":"image_policy_replace.py","text":""},{"location":"scripts/image_policy_replace/#description","title":"Description","text":"<p>Replace one or more image policies.</p> <p>The configurations for the image policies on the controller will be replaced by the configurations provided in the configuration file.</p>"},{"location":"scripts/image_policy_replace/#example-configuration-file","title":"Example configuration file","text":"config/config_image_policy_replace.yaml<pre><code>---\nconfig:\n    - name: KR5M\n      agnostic: False\n      description: KR5M\n      epld_image: n9000-epld.10.2.5.M.img\n      packages:\n        install:\n        - cfg_cmp-0.3.1.0-1.x86_64.rpm\n        uninstall:\n        - mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\n      platform: N9K\n      release: 10.2.5_nxos64-cs_64bit\n      type: PLATFORM\n    - name: NR1F\n      description: NR1F\n      platform: N9K\n      epld_image: n9000-epld.10.3.1.F.img\n      release: 10.3.1_nxos64-cs_64bit\n</code></pre>"},{"location":"scripts/image_policy_replace/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./image_policy_replace.py --config config/config_image_policy_replace.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/image_policy_replace/#example-output","title":"Example output","text":""},{"location":"scripts/image_policy_replace/#image-policy-configurations-replaced-successfully","title":"Image policy configurations replaced successfully","text":"Successful execution<pre><code>(.venv) AROBEL-M-G793% ./image_policy_replace.py --config prod/config_image_policy_replace.yaml\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.2.5.M.img\",\n            \"nxosVersion\": \"10.2.5_nxos64-cs_64bit\",\n            \"packageName\": \"cfg_cmp-0.3.1.0-1.x86_64.rpm\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"KR5M\",\n            \"policyName\": \"KR5M\",\n            \"policyType\": \"PLATFORM\",\n            \"rpmimages\": \"mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\",\n            \"sequence_number\": 1\n        },\n        {\n            \"agnostic\": false,\n            \"epldImgName\": \"n9000-epld.10.3.1.F.img\",\n            \"nxosVersion\": \"10.3.1_nxos64-cs_64bit\",\n            \"packageName\": \"\",\n            \"platform\": \"N9K\",\n            \"policyDescr\": \"NR1F\",\n            \"policyName\": \"NR1F\",\n            \"policyType\": \"PLATFORM\",\n            \"rpmimages\": \"\",\n            \"sequence_number\": 2\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"replaced\"\n        },\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"replaced\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Policy updated successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": \"Policy updated successfully.\",\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"scripts/image_policy_replace/#image-policies-do-not-exist-on-the-controller","title":"Image policies do not exist on the controller","text":"Image policies no not exist<pre><code>(.venv) AROBEL-M-G793% ./image_policy_replace.py --config prod/config_image_policy_replace.yaml\n{\n    \"changed\": false,\n    \"diff\": [],\n    \"failed\": false,\n    \"metadata\": [],\n    \"response\": [],\n    \"result\": []\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/image_policy_replace/#packagesinstall-is-set-to-a-package-name-that-does-not-exist-on-the-controller","title":"packages.install is set to a package name that does not exist on the controller","text":"Invalid config<pre><code>---\nconfig:\n    - name: KR5M\n      agnostic: False\n      description: KR5M\n      epld_image: n9000-epld.10.2.5.M.img\n      packages:\n        install:\n        - bad_package_name_which_does_not_exist.rpm\n        uninstall:\n        - mtx-grpctunnel-2.1.0.0-10.4.1.lib32_64_n9000\n      platform: N9K\n      release: 10.2.5_nxos64-cs_64bit\n      type: PLATFORM\n</code></pre> install package does not exist on the controller<pre><code>(.venv) AROBEL-M-G793% ./image_policy_replace.py --config prod/config_image_policy_replace.yaml\nunable to replace image policy configuration(s)\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": true,\n    \"metadata\": [\n        {\n            \"action\": \"replace\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"replaced\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": \"Invalid Package name(s).\",\n            \"MESSAGE\": \"Internal Server Error\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/imagemanagement/rest/policymgnt/edit-policy\",\n            \"RETURN_CODE\": 500,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": false\n        }\n    ]\n}\n(.venv) arobel@AROBEL-M-G793 examples %\n</code></pre>"},{"location":"scripts/maintenance_mode/","title":"maintenance_mode.py","text":""},{"location":"scripts/maintenance_mode/#description","title":"Description","text":"<p>Enable or disable maintenance mode on one or more switches.</p>"},{"location":"scripts/maintenance_mode/#example-configuration-file","title":"Example configuration file","text":"config/config_maintenance_mode.yaml<pre><code>---\nconfig:\n    - ip_address: 10.1.1.2\n      deploy: true\n      wait_for_mode_change: true\n      mode: maintenance\n    - ip_address: 10.1.1.3\n      deploy: true\n      wait_for_mode_change: true\n      mode: normal\n</code></pre>"},{"location":"scripts/maintenance_mode/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./maintenance_mode.py --config config/config_maintenance_mode.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/maintenance_mode/#example-output","title":"Example output","text":""},{"location":"scripts/maintenance_mode/#success","title":"Success","text":"Successful mode change for two switches<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode.py --config prod/config_maintenance_mode.yaml\nMaintenance mode change can take up to 5 minutes. Patience is a virtue.\n{\n    \"changed\": true,\n    \"diff\": [\n        {\n            \"fabric_name\": \"f1\",\n            \"ip_address\": \"10.1.1.2\",\n            \"maintenance_mode\": \"maintenance\",\n            \"sequence_number\": 1,\n            \"serial_number\": \"FOX1234ABCD\"\n        },\n        {\n            \"fabric_name\": \"f1\",\n            \"ip_address\": \"10.1.1.3\",\n            \"maintenance_mode\": \"normal\",\n            \"sequence_number\": 2,\n            \"serial_number\": \"FOX5678EFGH\"\n        },\n        {\n            \"10.1.1.2\": \"10.1.1.2\",\n            \"deploy_maintenance_mode\": true,\n            \"sequence_number\": 3\n        },\n        {\n            \"10.1.1.3\": \"10.1.1.3\",\n            \"deploy_maintenance_mode\": true,\n            \"sequence_number\": 4\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"change_sytem_mode\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"change_sytem_mode\",\n            \"check_mode\": false,\n            \"sequence_number\": 2,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"deploy_maintenance_mode\",\n            \"check_mode\": false,\n            \"sequence_number\": 3,\n            \"state\": \"merged\"\n        },\n        {\n            \"action\": \"deploy_maintenance_mode\",\n            \"check_mode\": false,\n            \"sequence_number\": 4,\n            \"state\": \"merged\"\n        }\n    ],\n    \"response\": [\n        {\n            \"DATA\": {\n                \"status\": \"Success\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/f1/switches/FOX1234ABCD/maintenance-mode\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        },\n        {\n            \"DATA\": {\n                \"status\": \"Success\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"DELETE\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/f1/switches/FOX5678EFGH/maintenance-mode\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 2\n        },\n        {\n            \"DATA\": {\n                \"status\": \"Success\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/f1/switches/FOX1234ABCD/deploy-maintenance-mode?waitForModeChange=true\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 3\n        },\n        {\n            \"DATA\": {\n                \"status\": \"Success\"\n            },\n            \"MESSAGE\": \"OK\",\n            \"METHOD\": \"POST\",\n            \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/f1/switches/FOX5678EFGH/deploy-maintenance-mode?waitForModeChange=true\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 4\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": true,\n            \"sequence_number\": 1,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 2,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 3,\n            \"success\": true\n        },\n        {\n            \"changed\": true,\n            \"sequence_number\": 4,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/maintenance_mode/#script-is-run-when-no-changes-are-needed","title":"Script is run when no changes are needed","text":"Controller state already matches configuration file.<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode.py --config prod/config_maintenance_mode.yaml\n{\n    \"changed\": false,\n    \"diff\": [],\n    \"failed\": false,\n    \"metadata\": [],\n    \"response\": [],\n    \"result\": []\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/maintenance_mode/#switch-does-not-exist-on-the-controller","title":"Switch does not exist on the controller","text":"Switch does not exist<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode.py --config prod/config_maintenance_mode.yaml\nExiting.  Error detail: Merged.get_have: Error while retrieving switch info. Error detail: SwitchDetails._get: Switch with ip_address 10.1.1.8 does not exist on the controller.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/maintenance_mode/#invalid-config-file","title":"Invalid config file","text":"config file contains incorrect value for mode<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode.py --config prod/config_maintenance_mode.yaml\n1 validation error for MaintenanceModeConfigValidator\nconfig.0.mode\n  Input should be 'maintenance' or 'normal' [type=enum, input_value='normally', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.9/v/enum\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/maintenance_mode_info/","title":"maintenance_mode_info.py","text":""},{"location":"scripts/maintenance_mode_info/#description","title":"Description","text":"<p>Enable or disable maintenance mode on one or more switches.</p>"},{"location":"scripts/maintenance_mode_info/#example-configuration-file","title":"Example configuration file","text":"config/config_maintenance_mode_info.yaml<pre><code>---\nconfig:\n    - ip_address: 10.1.1.2\n    - ip_address: 10.1.1.3\n</code></pre>"},{"location":"scripts/maintenance_mode_info/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./maintenance_mode_info.py --config config/config_maintenance_mode_info.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/maintenance_mode_info/#example-output","title":"Example output","text":""},{"location":"scripts/maintenance_mode_info/#success","title":"Success","text":"Successful query for two switches<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode_info.py --config prod/config_maintenance_mode_info.yaml\n{\n    \"changed\": false,\n    \"diff\": [\n        {\n            \"10.1.1.2\": {\n                \"fabric_deployment_disabled\": false,\n                \"fabric_freeze_mode\": false,\n                \"fabric_name\": \"f1\",\n                \"fabric_read_only\": false,\n                \"ip_address\": \"10.1.1.2\",\n                \"mode\": \"normal\",\n                \"role\": \"spine\",\n                \"serial_number\": \"FOX5678EFGH\"\n            },\n            \"10.1.1.3\": {\n                \"fabric_deployment_disabled\": false,\n                \"fabric_freeze_mode\": false,\n                \"fabric_name\": \"f1\",\n                \"fabric_read_only\": false,\n                \"ip_address\": \"10.1.1.3\",\n                \"mode\": \"maintenance\",\n                \"role\": \"spine\",\n                \"serial_number\": \"FOX5678EFGH\"\n            },\n            \"sequence_number\": 1\n        }\n    ],\n    \"failed\": false,\n    \"metadata\": [\n        {\n            \"action\": \"maintenance_mode_info\",\n            \"check_mode\": false,\n            \"sequence_number\": 1,\n            \"state\": null\n        }\n    ],\n    \"response\": [\n        {\n            \"MESSAGE\": \"MaintenanceModeInfo OK.\",\n            \"METHOD\": \"NA\",\n            \"REQUEST_PATH\": \"NA\",\n            \"RETURN_CODE\": 200,\n            \"sequence_number\": 1\n        }\n    ],\n    \"result\": [\n        {\n            \"changed\": false,\n            \"sequence_number\": 1,\n            \"success\": true\n        }\n    ]\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/maintenance_mode_info/#switch-does-not-exist-on-the-controller","title":"Switch does not exist on the controller","text":"Switch does not exist<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode_info.py --config prod/config_maintenance_mode_info.yaml\nExiting.  Error detail: Query.commit: Error while retrieving switch information from the controller. Error detail: Query.get_have: Error while retrieving switch info. Error detail: SwitchDetails._get: Switch with ip_address 10.1.1.8 does not exist on the controller.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/maintenance_mode_info/#invalid-config-file","title":"Invalid config file","text":"config file contains incorrect value for ip_address<pre><code>(.venv) AROBEL-M-G793% ./maintenance_mode_info.py --config prod/config_maintenance_mode_info.yaml\n1 validation error for MaintenanceModeInfoConfigValidator\nconfig.0.ip_address\n  Input is not a valid IPv4 address [type=ip_v4_address, input_value='foo', input_type=str]\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/network_create/","title":"network_create.py","text":""},{"location":"scripts/network_create/#description","title":"Description","text":"<p>Create one or more networks.</p>"},{"location":"scripts/network_create/#example-configuration-file","title":"Example configuration file","text":"config/config_network_create.yaml<pre><code>---\nconfig:\n  - fabric_name: MyFabric1\n    network_name: MyNet1\n    enable_ir: True\n    gateway_ip_address: 10.5.1.1/24\n    network_id: 30005\n    vlan_id: 3005\n    vrf_name: MyVrf1\n  - fabric_name: MyFabric1\n    network_name: MyNet2\n    enable_ir: True\n    gateway_ip_address: 10.6.1.1/24\n    network_id: 30006\n    vlan_id: 3006\n    vrf_name: MyVrf1\n</code></pre>"},{"location":"scripts/network_create/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./network_create.py --config config/config_network_create.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/network_create/#example-output","title":"Example output","text":""},{"location":"scripts/network_create/#success","title":"Success","text":"<pre><code>(.venv) AROBEL-M-G793% ./network_create.py --config prod/config_network_create.yaml\nNetwork MyNet1 with id 30005 created in fabric MyFabric1\nNetwork MyNet2 with id 30006 created in fabric MyFabric1\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/network_create/#failure","title":"Failure","text":"<pre><code>(.venv) AROBEL-M-G793% ./network_create.py --config prod/config_network_create.yaml\nError creating network. Error detail: NetworkCreate.commit: networkId 30005 already exists in fabric MyFabric1. Delete it before calling NetworkCreate.commit\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/network_delete/","title":"network_delete.py","text":""},{"location":"scripts/network_delete/#description","title":"Description","text":"<p>Delete one or more networks.</p>"},{"location":"scripts/network_delete/#example-configuration-file","title":"Example configuration file","text":"config/config_network_delete.yaml<pre><code>---\nconfig:\n  - fabric_name: MyFabric1\n    network_name: MyNet1\n  - fabric_name: MyFabric1\n    network_name: MyNet2\n</code></pre>"},{"location":"scripts/network_delete/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./network_delete.py --config config/config_network_delete.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/network_delete/#example-output","title":"Example output","text":""},{"location":"scripts/network_delete/#success","title":"Success","text":"<pre><code>(.venv) AROBEL-M-G793% ./network_delete.py --config prod/config_network_delete.yaml\nNetwork MyNet1 deleted from fabric MyFabric1\nNetwork MyNet2 deleted from fabric MyFabric1\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/network_delete/#failure-network-does-not-exist-in-fabric","title":"Failure - Network does not exist in fabric","text":"<pre><code>(.venv) AROBEL-M-G793% ./network_delete.py --config prod/config_network_delete.yaml\nError deleting network. Error detail: NetworkDelete.commit: networkName MyNet1 does not exist in fabric MyFabric1.\nError deleting network. Error detail: NetworkDelete.commit: networkName MyNet2 does not exist in fabric MyFabric1.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/network_delete/#failure-fabric-does-not-exist","title":"Failure - Fabric does not exist","text":"<pre><code>(.venv) AROBEL-M-G793% ./network_delete.py --config prod/config_network_delete.yaml\nError deleting network. Error detail: NetworkDelete.commit: fabric_name MyFabric1 does not exist on the controller.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/reachability/","title":"reachability.py","text":""},{"location":"scripts/reachability/#description","title":"Description","text":"<p>Display reachability (from controller perspective) information for one or more devices.</p>"},{"location":"scripts/reachability/#example-configuration-file","title":"Example configuration file","text":"Example configuraion file<pre><code>---\nconfig:\n  - fabric_name: MyFabric1\n    seed_ip: 10.1.1.2\n  - fabric_name: MyFabric1\n    seed_ip: 10.1.1.3\n</code></pre>"},{"location":"scripts/reachability/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> Example usage<pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MyNdPassword\nexport ND_USERNAME=admin\nexport NXOS_PASSWORD=MyNxosPassword\nexport NXOS_USERNAME=admin\ncd $HOME/repos/ndfc-python/examples\n./reachability.py --config/config_reachability.yaml\n# output not shown\nsys_name: cvd-1313-leaf\n  auth: True\n  device_index: cvd-1313-leaf(FDO211218HH)\n  hop_count: 0\n  ip_addr: 10.1.1.2\n  known: True\n  last_change: None\n  platform: N9K-C93180YC-EX\n  reachable: True\n  selectable: False\n  serial_number: FDO123456AB\n  status_reason: already managed in MyFabric1\n  switch_role: None\n  valid: True\n  vdc_id: 0\n  vdc_mac: None\n  vendor: Cisco\n  version: 10.3(1)\n</code></pre>"},{"location":"scripts/reachability/#sample-output","title":"Sample output","text":""},{"location":"scripts/reachability/#success","title":"Success","text":"Success<pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MyNdPassword\nexport ND_USERNAME=admin\nexport NXOS_PASSWORD=MyNxosPassword\nexport NXOS_USERNAME=admin\ncd $HOME/repos/ndfc-python/examples\n./reachability.py --config/config_reachability.yaml\n# output not shown\nsys_name: cvd-1313-leaf\n  auth: True\n  device_index: cvd-1313-leaf(FDO211218HH)\n  hop_count: 0\n  ip_addr: 10.1.1.2\n  known: True\n  last_change: None\n  platform: N9K-C93180YC-EX\n  reachable: True\n  selectable: False\n  serial_number: FDO123456AB\n  status_reason: already managed in MyFabric1\n  switch_role: None\n  valid: True\n  vdc_id: 0\n  vdc_mac: None\n  vendor: Cisco\n  version: 10.3(1)\n</code></pre>"},{"location":"scripts/reachability/#failure-missing-credential","title":"Failure - Missing credential","text":"<pre><code>(.venv) AROBEL-M-G793% ./reachability.py --config prod/config_reachability.yaml --ansible-vault $HOME/.ansible/vault\nVault password:\nCredentialsAnsibleVault.commit: Exiting. ansible_vault is missing key nd_password. vault file: /Users/arobel/.ansible/vault\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/reachability/#failure-ansible-vault-file-is-missing","title":"Failure - Ansible Vault file is missing","text":"<pre><code>(.venv) AROBEL-M-G793% ./reachability.py --config prod/config_reachability.yaml --ansible-vault $HOME/does_not_exist\nVault password:\nExiting. Error detail: CredentialsAnsibleVault.commit: Unable to load credentials in  /Users/arobel/does_not_exist. Exception detail: AnsibleFileNotFound: Unable to retrieve file contents\nCould not find or access '/Users/arobel/does_not_exist' on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/reachability/#failure-fabric_name-does-not-exist-on-the-controller","title":"Failure - fabric_name does not exist on the controller","text":"<pre><code>(.venv) AROBEL-M-G793% ./reachability.py --config prod/config_reachability.yaml --ansible-vault $HOME/.ansible/vault\nVault password:\nExiting. Error detail: Reachability.commit: fabric_name MyFabric1 does not exist on the controller.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/rest_get_request/","title":"rest_get_request.py","text":""},{"location":"scripts/rest_get_request/#description","title":"Description","text":"<p>Send a GET request to the controller.</p>"},{"location":"scripts/rest_get_request/#usage","title":"Usage","text":""},{"location":"scripts/rest_get_request/#credentials","title":"Credentials","text":"<p>Either set the following environment variables or use the command line options to set the credentials for your Nexus Dashboard controller.</p> Set environment variables<pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MyNdfcPassword\nexport ND_USERNAME=admin\n</code></pre> If the above environment variables are set<pre><code>./rest_get_request.py\n</code></pre> If the above environment variables are not set<pre><code>./rest_get_request.py --nd-domain local --nd-password MyNdfcPassword --nd-username admin --nd-ip4 10.1.1.1\n</code></pre>"},{"location":"scripts/rest_get_request/#logging","title":"Logging","text":"<p>Logging is optional, and is disabled unless the following environment variable is set.</p> <p><code>NDFC_LOGGING_CONFIG</code> should point to a valid logging dictConfig file.</p> <p>dictConfig</p> Enable logging<pre><code>export NDFC_LOGGING_CONFIG=$HOME/repos/ndfc-python/lib/ndfc_python/logging_config.json\n</code></pre>"},{"location":"scripts/rest_get_request/#example-output","title":"Example output","text":""},{"location":"scripts/rest_get_request/#success","title":"Success","text":"Successful request<pre><code>(.venv) AROBEL-M-G793% ./rest_get_request.py\n{\n    \"RETURN_CODE\": 200,\n    \"DATA\": [\n        {\n            \"id\": 6,\n            \"fabricId\": \"FABRIC-6\",\n            \"fabricName\": \"VXLAN_Fabric\",\n            \"fabricType\": \"Switch_Fabric\",\n            \"fabricTypeFriendly\": \"Switch Fabric\",\n            \"fabricTechnology\": \"VXLANFabric\",\n            \"templateFabricType\": \"Data Center VXLAN EVPN\",\n            \"fabricTechnologyFriendly\": \"VXLAN EVPN\",\n            \"provisionMode\": \"DCNMTopDown\",\n            \"deviceType\": \"n9k\",\n            \"replicationMode\": \"Multicast\",\n            \"operStatus\": \"WARNING\",\n            \"asn\": \"65000\",\n            \"siteId\": \"65000\",\n            \"templateName\": \"Easy_Fabric\",\n            \"nvPairs\": {\n                \"MSO_SITE_ID\": \"\",\n                \"PHANTOM_RP_LB_ID1\": \"\",\n                \"PHANTOM_RP_LB_ID2\": \"\",\n                \"PHANTOM_RP_LB_ID3\": \"\",\n                \"IBGP_PEER_TEMPLATE\": \"\",\n                \"PHANTOM_RP_LB_ID4\": \"\",\n                \"abstract_ospf\": \"base_ospf\",\n                \"FEATURE_PTP\": \"false\",\n                \"L3_PARTITION_ID_RANGE\": \"50000-59000\",\n                \"DHCP_START_INTERNAL\": \"\",\n                \"SSPINE_COUNT\": \"0\",\n                \"ENABLE_SGT\": \"false\",\n                \"ADVERTISE_PIP_BGP\": \"false\",\n                \"FABRIC_VPC_QOS_POLICY_NAME\": \"spine_qos_for_fabric_vpc_peering\",\n                \"BFD_PIM_ENABLE\": \"false\",\n                \"ENABLE_MACSEC_PREV\": \"false\",\n                \"NXC_DEST_VRF\": \"\",\n                \"DHCP_END\": \"\",\n                \"UNDERLAY_IS_V6\": \"false\",\n                \"FABRIC_VPC_DOMAIN_ID\": \"\",\n                \"SEED_SWITCH_CORE_INTERFACES\": \"\",\n                \"ALLOW_NXC_PREV\": \"true\",\n                \"FABRIC_MTU_PREV\": \"9216\",\n                \"BFD_ISIS_ENABLE\": \"false\",\n                \"HD_TIME\": \"180\",\n                \"AUTO_UNIQUE_VRF_LITE_IP_PREFIX\": \"false\",\n                \"OSPF_AUTH_ENABLE\": \"false\",\n                \"LOOPBACK1_IPV6_RANGE\": \"\",\n                \"ROUTER_ID_RANGE\": \"\",\n                \"ENABLE_MACSEC\": \"false\",\n                \"MSO_CONNECTIVITY_DEPLOYED\": \"\",\n                \"DEAFULT_QUEUING_POLICY_OTHER\": \"queuing_policy_default_other\",\n                \"MACSEC_REPORT_TIMER\": \"\",\n                \"UNNUM_DHCP_START_INTERNAL\": \"\",\n                \"PFC_WATCH_INT_PREV\": \"\",\n                \"MPLS_ISIS_AREA_NUM\": \"0001\",\n                \"PREMSO_PARENT_FABRIC\": \"\",\n                \"PTP_DOMAIN_ID\": \"\",\n                \"UNNUM_DHCP_END_INTERNAL\": \"\",\n                \"USE_LINK_LOCAL\": \"true\",\n                \"AUTO_SYMMETRIC_VRF_LITE\": \"false\",\n                \"BGP_AS_PREV\": \"65000\",\n                \"ENABLE_PBR\": \"false\",\n                \"DCI_SUBNET_TARGET_MASK\": \"30\",\n                \"ENABLE_TRMv6\": \"false\",\n                \"VPC_PEER_LINK_PO\": \"500\",\n                \"ISIS_AUTH_ENABLE\": \"false\",\n                \"PER_VRF_LOOPBACK_AUTO_PROVISION\": \"false\",\n                \"REPLICATION_MODE\": \"Multicast\",\n                \"ENABLE_DCI_MACSEC_PREV\": \"false\",\n                \"SITE_ID_POLICY_ID\": \"\",\n                \"SGT_NAME_PREFIX\": \"\",\n                \"ANYCAST_RP_IP_RANGE\": \"10.254.254.0/24\",\n                \"VPC_ENABLE_IPv6_ND_SYNC\": \"true\",\n                \"TCAM_ALLOCATION\": \"true\",\n                \"abstract_isis_interface\": \"isis_interface\",\n                \"ENABLE_RT_INTF_STATS\": \"false\",\n                \"SERVICE_NETWORK_VLAN_RANGE\": \"3000-3199\",\n                \"MACSEC_ALGORITHM\": \"\",\n                \"ISIS_LEVEL\": \"level-2\",\n                \"SUBNET_TARGET_MASK\": \"30\",\n                \"abstract_anycast_rp\": \"anycast_rp\",\n                \"AUTO_SYMMETRIC_DEFAULT_VRF\": \"false\",\n                \"ENABLE_NETFLOW\": \"false\",\n                \"DEAFULT_QUEUING_POLICY_R_SERIES\": \"queuing_policy_default_r_series\",\n                \"PER_VRF_LOOPBACK_IP_RANGE_V6\": \"\",\n                \"BROWNFIELD_NETWORK_NAME_FORMAT\": \"Auto_Net_VNI$$VNI$$_VLAN$$VLAN_ID$$\",\n                \"temp_vpc_peer_link\": \"int_vpc_peer_link_po\",\n                \"ENABLE_FABRIC_VPC_DOMAIN_ID\": \"false\",\n                \"IBGP_PEER_TEMPLATE_LEAF\": \"\",\n                \"DCI_SUBNET_RANGE\": \"10.33.0.0/16\",\n                \"ENABLE_NXAPI\": \"true\",\n                \"VRF_LITE_AUTOCONFIG\": \"Manual\",\n                \"MGMT_GW_INTERNAL\": \"\",\n                \"GRFIELD_DEBUG_FLAG\": \"Disable\",\n                \"VRF_VLAN_RANGE\": \"2000-2299\",\n                \"ISIS_AUTH_KEYCHAIN_NAME\": \"\",\n                \"OBJECT_TRACKING_NUMBER_RANGE\": \"100-299\",\n                \"SSPINE_ADD_DEL_DEBUG_FLAG\": \"Disable\",\n                \"abstract_bgp_neighbor\": \"evpn_bgp_rr_neighbor\",\n                \"OSPF_AUTH_KEY_ID\": \"\",\n                \"PIM_HELLO_AUTH_ENABLE\": \"false\",\n                \"abstract_feature_leaf\": \"base_feature_leaf_upg\",\n                \"BFD_AUTH_ENABLE\": \"false\",\n                \"INTF_STAT_LOAD_INTERVAL\": \"\",\n                \"BGP_LB_ID\": \"0\",\n                \"LOOPBACK1_IP_RANGE\": \"10.3.0.0/22\",\n                \"AGG_ACC_VPC_PO_ID_RANGE\": \"\",\n                \"EXTRA_CONF_TOR\": \"\",\n                \"AAA_SERVER_CONF\": \"\",\n                \"VPC_PEER_KEEP_ALIVE_OPTION\": \"management\",\n                \"AUTO_VRFLITE_IFC_DEFAULT_VRF\": \"false\",\n                \"enableRealTimeBackup\": \"\",\n                \"DCI_MACSEC_KEY_STRING\": \"\",\n                \"ENABLE_AI_ML_QOS_POLICY\": \"false\",\n                \"V6_SUBNET_TARGET_MASK\": \"126\",\n                \"STRICT_CC_MODE\": \"false\",\n                \"BROWNFIELD_SKIP_OVERLAY_NETWORK_ATTACHMENTS\": \"false\",\n                \"VPC_PEER_LINK_VLAN\": \"3600\",\n                \"NXAPI_HTTP_PORT\": \"80\",\n                \"abstract_trunk_host\": \"int_trunk_host\",\n                \"BGP_AUTH_ENABLE\": \"false\",\n                \"MST_INSTANCE_RANGE\": \"\",\n                \"PM_ENABLE_PREV\": \"false\",\n                \"ENABLE_AGG_ACC_ID_RANGE\": \"false\",\n                \"NXC_PROXY_PORT\": \"8080\",\n                \"RP_MODE\": \"asm\",\n                \"enableScheduledBackup\": \"\",\n                \"BFD_OSPF_ENABLE\": \"false\",\n                \"abstract_ospf_interface\": \"ospf_interface_11_1\",\n                \"MACSEC_FALLBACK_ALGORITHM\": \"\",\n                \"UNNUM_DHCP_END\": \"\",\n                \"LOOPBACK0_IP_RANGE\": \"10.2.0.0/22\",\n                \"ENABLE_AAA\": \"false\",\n                \"DEPLOYMENT_FREEZE\": \"false\",\n                \"L2_HOST_INTF_MTU_PREV\": \"9216\",\n                \"SGT_RECALC_STATUS\": \"empty\",\n                \"NETFLOW_MONITOR_LIST\": \"\",\n                \"NTP_SERVER_IP_LIST\": \"\",\n                \"ENABLE_AGENT\": \"false\",\n                \"MACSEC_FALLBACK_KEY_STRING\": \"\",\n                \"OVERLAY_MODE\": \"cli\",\n                \"PER_VRF_LOOPBACK_AUTO_PROVISION_PREV\": \"false\",\n                \"FF\": \"Easy_Fabric\",\n                \"STP_ROOT_OPTION\": \"unmanaged\",\n                \"ISIS_OVERLOAD_ENABLE\": \"\",\n                \"NETFLOW_RECORD_LIST\": \"\",\n                \"FABRIC_TYPE\": \"Switch_Fabric\",\n                \"PER_VRF_LOOPBACK_AUTO_PROVISION_V6\": \"false\",\n                \"SPINE_COUNT\": \"0\",\n                \"abstract_extra_config_bootstrap\": \"extra_config_bootstrap_11_1\",\n                \"L3VNI_IPv6_MCAST_GROUP\": \"\",\n                \"MPLS_LOOPBACK_IP_RANGE\": \"\",\n                \"LINK_STATE_ROUTING_TAG_PREV\": \"UNDERLAY\",\n                \"DHCP_ENABLE\": \"false\",\n                \"BFD_AUTH_KEY_ID\": \"\",\n                \"ALLOW_L3VNI_NO_VLAN\": \"true\",\n                \"MSO_SITE_GROUP_NAME\": \"\",\n                \"MGMT_PREFIX_INTERNAL\": \"\",\n                \"DHCP_IPV6_ENABLE_INTERNAL\": \"\",\n                \"BGP_AUTH_KEY_TYPE\": \"3\",\n                \"SITE_ID\": \"65000\",\n                \"temp_anycast_gateway\": \"anycast_gateway\",\n                \"BRFIELD_DEBUG_FLAG\": \"Disable\",\n                \"BGP_AS\": \"65000\",\n                \"BOOTSTRAP_MULTISUBNET\": \"#Scope_Start_IP, Scope_End_IP, Scope_Default_Gateway, Scope_Subnet_Prefix\",\n                \"ISIS_P2P_ENABLE\": \"\",\n                \"ENABLE_NGOAM\": \"true\",\n                \"CDP_ENABLE\": \"false\",\n                \"PTP_LB_ID\": \"\",\n                \"DHCP_IPV6_ENABLE\": \"\",\n                \"MACSEC_KEY_STRING\": \"\",\n                \"TOPDOWN_CONFIG_RM_TRACKING\": \"notstarted\",\n                \"ENABLE_L3VNI_NO_VLAN\": \"false\",\n                \"KME_SERVER_PORT\": \"\",\n                \"OSPF_AUTH_KEY\": \"\",\n                \"QKD_PROFILE_NAME\": \"\",\n                \"MVPN_VRI_ID_RANGE\": \"\",\n                \"ENABLE_FABRIC_VPC_DOMAIN_ID_PREV\": \"false\",\n                \"ENABLE_DCI_MACSEC\": \"false\",\n                \"EXTRA_CONF_LEAF\": \"\",\n                \"ENABLE_AI_ML_QOS_POLICY_FLAP\": \"false\",\n                \"vrf_extension_template\": \"Default_VRF_Extension_Universal\",\n                \"DHCP_START\": \"\",\n                \"ENABLE_TRM\": \"false\",\n                \"ENABLE_PVLAN_PREV\": \"false\",\n                \"FEATURE_PTP_INTERNAL\": \"false\",\n                \"SGT_PREPROV_RECALC_STATUS\": \"empty\",\n                \"ENABLE_NXAPI_HTTP\": \"true\",\n                \"MPLS_LB_ID\": \"\",\n                \"abstract_isis\": \"base_isis_level2\",\n                \"FABRIC_VPC_DOMAIN_ID_PREV\": \"\",\n                \"ROUTE_MAP_SEQUENCE_NUMBER_RANGE\": \"1-65534\",\n                \"NETWORK_VLAN_RANGE\": \"2300-2999\",\n                \"STATIC_UNDERLAY_IP_ALLOC\": \"false\",\n                \"MGMT_V6PREFIX_INTERNAL\": \"\",\n                \"MPLS_HANDOFF\": \"false\",\n                \"STP_BRIDGE_PRIORITY\": \"\",\n                \"scheduledTime\": \"\",\n                \"ANYCAST_LB_ID\": \"\",\n                \"MACSEC_CIPHER_SUITE\": \"\",\n                \"STP_VLAN_RANGE\": \"\",\n                \"MSO_CONTROLER_ID\": \"\",\n                \"POWER_REDUNDANCY_MODE\": \"ps-redundant\",\n                \"BFD_ENABLE\": \"false\",\n                \"abstract_extra_config_leaf\": \"extra_config_leaf\",\n                \"ANYCAST_GW_MAC\": \"2020.0000.00aa\",\n                \"abstract_dhcp\": \"base_dhcp\",\n                \"default_pvlan_sec_network\": \"\",\n                \"EXTRA_CONF_SPINE\": \"\",\n                \"NTP_SERVER_VRF\": \"\",\n                \"SPINE_SWITCH_CORE_INTERFACES\": \"\",\n                \"ENABLE_VRI_ID_REALLOC\": \"false\",\n                \"LINK_STATE_ROUTING_TAG\": \"UNDERLAY\",\n                \"ISIS_OVERLOAD_ELAPSE_TIME\": \"\",\n                \"DCI_MACSEC_ALGORITHM\": \"\",\n                \"RP_LB_ID\": \"254\",\n                \"AI_ML_QOS_POLICY\": \"AI_Fabric_QOS_400G\",\n                \"PTP_VLAN_ID\": \"\",\n                \"BOOTSTRAP_CONF\": \"\",\n                \"PER_VRF_LOOPBACK_AUTO_PROVISION_V6_PREV\": \"false\",\n                \"LINK_STATE_ROUTING\": \"ospf\",\n                \"ISIS_AUTH_KEY\": \"\",\n                \"network_extension_template\": \"Default_Network_Extension_Universal\",\n                \"DNS_SERVER_IP_LIST\": \"\",\n                \"DOMAIN_NAME_INTERNAL\": \"\",\n                \"ENABLE_EVPN\": \"true\",\n                \"abstract_multicast\": \"base_multicast_11_1\",\n                \"VPC_DELAY_RESTORE_TIME\": \"60\",\n                \"BFD_AUTH_KEY\": \"\",\n                \"IPv6_MULTICAST_GROUP_SUBNET\": \"\",\n                \"AGENT_INTF\": \"eth0\",\n                \"FABRIC_MTU\": \"9216\",\n                \"L3VNI_MCAST_GROUP\": \"\",\n                \"QKD_PROFILE_NAME_PREV\": \"\",\n                \"UNNUM_BOOTSTRAP_LB_ID\": \"\",\n                \"VPC_DOMAIN_ID_RANGE\": \"1-1000\",\n                \"HOST_INTF_ADMIN_STATE\": \"true\",\n                \"ALLOW_L3VNI_NO_VLAN_PREV\": \"true\",\n                \"BFD_IBGP_ENABLE\": \"false\",\n                \"SGT_PREPROVISION\": \"\",\n                \"DCI_MACSEC_FALLBACK_KEY_STRING\": \"\",\n                \"AUTO_UNIQUE_VRF_LITE_IP_PREFIX_PREV\": \"false\",\n                \"IPv6_ANYCAST_RP_IP_RANGE_INTERNAL\": \"\",\n                \"DCI_MACSEC_FALLBACK_ALGORITHM\": \"\",\n                \"VPC_AUTO_RECOVERY_TIME\": \"360\",\n                \"DNS_SERVER_VRF\": \"\",\n                \"UPGRADE_FROM_VERSION\": \"\",\n                \"ISIS_AREA_NUM\": \"0001\",\n                \"BANNER\": \"\",\n                \"NXC_SRC_INTF\": \"\",\n                \"SGT_ID_RANGE\": \"\",\n                \"ENABLE_QKD\": \"\",\n                \"PER_VRF_LOOPBACK_IP_RANGE\": \"\",\n                \"SGT_PREPROVISION_PREV\": \"\",\n                \"SYSLOG_SEV\": \"\",\n                \"abstract_loopback_interface\": \"int_fabric_loopback_11_1\",\n                \"SYSLOG_SERVER_VRF\": \"\",\n                \"EXTRA_CONF_INTRA_LINKS\": \"\",\n                \"SNMP_SERVER_HOST_TRAP\": \"true\",\n                \"PIM_HELLO_AUTH_KEY\": \"\",\n                \"KME_SERVER_IP\": \"\",\n                \"abstract_extra_config_spine\": \"extra_config_spine\",\n                \"temp_vpc_domain_mgmt\": \"vpc_domain_mgmt\",\n                \"V6_SUBNET_RANGE\": \"\",\n                \"SUBINTERFACE_RANGE\": \"2-511\",\n                \"BGP_AUTH_KEY\": \"\",\n                \"abstract_routed_host\": \"int_routed_host\",\n                \"ENABLE_PVLAN\": \"false\",\n                \"INBAND_DHCP_SERVERS\": \"\",\n                \"MPLS_ISIS_AREA_NUM_PREV\": \"\",\n                \"default_network\": \"Default_Network_Universal\",\n                \"PFC_WATCH_INT\": \"\",\n                \"ISIS_AUTH_KEYCHAIN_KEY_ID\": \"\",\n                \"MGMT_V6PREFIX\": \"\",\n                \"abstract_feature_spine\": \"base_feature_spine_upg\",\n                \"ENABLE_DEFAULT_QUEUING_POLICY\": \"false\",\n                \"PNP_ENABLE_INTERNAL\": \"\",\n                \"ANYCAST_BGW_ADVERTISE_PIP\": \"false\",\n                \"NETFLOW_EXPORTER_LIST\": \"\",\n                \"RP_COUNT\": \"2\",\n                \"abstract_vlan_interface\": \"int_fabric_vlan_11_1\",\n                \"FABRIC_NAME\": \"VXLAN_Fabric\",\n                \"abstract_pim_interface\": \"pim_interface\",\n                \"PM_ENABLE\": \"false\",\n                \"LOOPBACK0_IPV6_RANGE\": \"\",\n                \"IGNORE_CERT\": \"\",\n                \"DEFAULT_VRF_REDIS_BGP_RMAP\": \"\",\n                \"NVE_LB_ID\": \"1\",\n                \"OVERLAY_MODE_PREV\": \"cli\",\n                \"VPC_DELAY_RESTORE\": \"150\",\n                \"IPv6_ANYCAST_RP_IP_RANGE\": \"\",\n                \"UNDERLAY_IS_V6_PREV\": \"false\",\n                \"SGT_OPER_STATUS\": \"off\",\n                \"NXAPI_HTTPS_PORT\": \"443\",\n                \"ENABLE_SGT_PREV\": \"false\",\n                \"ENABLE_VPC_PEER_LINK_NATIVE_VLAN\": \"false\",\n                \"L2_HOST_INTF_MTU\": \"9216\",\n                \"abstract_route_map\": \"route_map\",\n                \"TRUSTPOINT_LABEL\": \"\",\n                \"INBAND_MGMT_PREV\": \"false\",\n                \"EXT_FABRIC_TYPE\": \"\",\n                \"abstract_vpc_domain\": \"base_vpc_domain_11_1\",\n                \"ACTIVE_MIGRATION\": \"false\",\n                \"ISIS_AREA_NUM_PREV\": \"\",\n                \"COPP_POLICY\": \"strict\",\n                \"DHCP_END_INTERNAL\": \"\",\n                \"DCI_MACSEC_CIPHER_SUITE\": \"\",\n                \"BOOTSTRAP_ENABLE\": \"false\",\n                \"ADVERTISE_PIP_ON_BORDER\": \"true\",\n                \"default_vrf\": \"Default_VRF_Universal\",\n                \"NXC_PROXY_SERVER\": \"\",\n                \"OSPF_AREA_ID\": \"0.0.0.0\",\n                \"abstract_extra_config_tor\": \"extra_config_tor\",\n                \"SYSLOG_SERVER_IP_LIST\": \"\",\n                \"ENABLE_TENANT_DHCP\": \"true\",\n                \"BOOTSTRAP_ENABLE_PREV\": \"false\",\n                \"ANYCAST_RP_IP_RANGE_INTERNAL\": \"\",\n                \"RR_COUNT\": \"2\",\n                \"BOOTSTRAP_MULTISUBNET_INTERNAL\": \"\",\n                \"MGMT_GW\": \"\",\n                \"UNNUM_DHCP_START\": \"\",\n                \"MGMT_PREFIX\": \"\",\n                \"BFD_ENABLE_PREV\": \"\",\n                \"abstract_bgp_rr\": \"evpn_bgp_rr\",\n                \"INBAND_MGMT\": \"false\",\n                \"abstract_bgp\": \"base_bgp\",\n                \"SLA_ID_RANGE\": \"10000-19999\",\n                \"ENABLE_NETFLOW_PREV\": \"false\",\n                \"SUBNET_RANGE\": \"10.4.0.0/16\",\n                \"DEAFULT_QUEUING_POLICY_CLOUDSCALE\": \"queuing_policy_default_8q_cloudscale\",\n                \"MULTICAST_GROUP_SUBNET\": \"239.1.1.0/25\",\n                \"FABRIC_INTERFACE_TYPE\": \"p2p\",\n                \"ALLOW_NXC\": \"true\",\n                \"FABRIC_VPC_QOS\": \"false\",\n                \"OVERWRITE_GLOBAL_NXC\": \"false\",\n                \"AAA_REMOTE_IP_ENABLED\": \"false\",\n                \"L2_SEGMENT_ID_RANGE\": \"30000-49000\"\n            },\n            \"vrfTemplate\": \"Default_VRF_Universal\",\n            \"networkTemplate\": \"Default_Network_Universal\",\n            \"vrfExtensionTemplate\": \"Default_VRF_Extension_Universal\",\n            \"networkExtensionTemplate\": \"Default_Network_Extension_Universal\",\n            \"createdOn\": 1729905602822,\n            \"modifiedOn\": 1729905608364\n        }\n    ],\n    \"MESSAGE\": \"OK\",\n    \"METHOD\": \"GET\",\n    \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics\"\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/rest_get_request/#failure-login-credentials-are-invalid","title":"Failure - Login credentials are invalid","text":"Invalid login credentials<pre><code>(.venv) AROBEL-M-G793% ./rest_get_request.py --nd-domain local --nd-username admin --nd-password TotallyIncorrectPassword --nd-ip4 10.1.1.1\nExiting.  Error detail: NdfcPythonSender.commit: Unable to login to the controller. Error detail: Sender.update_token: Unable to parse token from response: {'RETURN_CODE': 401, 'DATA': {'error': 'Invalid Username/Password'}, 'MESSAGE': 'Unauthorized', 'METHOD': 'POST', 'REQUEST_PATH': 'https://10.1.1.1/login'}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/rest_get_request/#failure-endpoint-fooendpoint-does-not-exist","title":"Failure - Endpoint <code>/foo/endpoint</code> does not exist","text":"Invalid endpoint<pre><code>(.venv) AROBEL-M-G793% ./rest_get_request.py\n{\n    \"RETURN_CODE\": 404,\n    \"DATA\": {\n        \"INVALID_JSON\": \"&lt;html&gt;\\r\\n&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;\\r\\n&lt;body&gt;\\r\\n&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;\\r\\n&lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;\\r\\n&lt;/body&gt;\\r\\n&lt;/html&gt;\\r\\n\"\n    },\n    \"MESSAGE\": \"Not Found\",\n    \"METHOD\": \"GET\",\n    \"REQUEST_PATH\": \"https://10.1.1.1/foo/endpoint\"\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/rest_post_request/","title":"rest_post_request.py","text":""},{"location":"scripts/rest_post_request/#description","title":"Description","text":"<p>Send a POST request to the controller.</p>"},{"location":"scripts/rest_post_request/#usage","title":"Usage","text":""},{"location":"scripts/rest_post_request/#credentials","title":"Credentials","text":"<p>Either set the following environment variables or use the command line options to set the credentials for your Nexus Dashboard controller.</p> Set environment variables<pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MyNdfcPassword\nexport ND_USERNAME=admin\n</code></pre> If the above environment variables are set<pre><code>./rest_post_request.py\n</code></pre> If the above environment variables are not set<pre><code>./rest_post_request.py --nd-domain local --nd-password MyNdfcPassword --nd-username admin --nd-ip4 10.1.1.1\n</code></pre>"},{"location":"scripts/rest_post_request/#logging","title":"Logging","text":"<p>Logging is optional, and is disabled unless the following environment variable is set.</p> <p><code>NDFC_LOGGING_CONFIG</code> should point to a valid Python logging dictConfig file.</p> <p>dictConfig</p> Enable logging<pre><code>export NDFC_LOGGING_CONFIG=$HOME/repos/ndfc-python/lib/ndfc_python/logging_config.json\n</code></pre>"},{"location":"scripts/rest_post_request/#example-output","title":"Example output","text":""},{"location":"scripts/rest_post_request/#success","title":"Success","text":"Successful request<pre><code>(.venv) AROBEL-M-G793% ./rest_post_request.py\n{\n    \"RETURN_CODE\": 200,\n    \"DATA\": {\n        \"id\": 9,\n        \"fabricId\": \"FABRIC-9\",\n        \"fabricName\": \"MyFabric\",\n        \"fabricType\": \"Switch_Fabric\",\n        \"fabricTypeFriendly\": \"Switch Fabric\",\n        \"fabricTechnology\": \"VXLANFabric\",\n        \"templateFabricType\": \"\",\n        \"fabricTechnologyFriendly\": \"VXLAN EVPN\",\n        \"provisionMode\": \"DCNMTopDown\",\n        \"deviceType\": \"n9k\",\n        \"replicationMode\": \"Multicast\",\n        \"asn\": \"65067\",\n        \"siteId\": \"\",\n        \"templateName\": \"Easy_Fabric\",\n        \"nvPairs\": {\n            \"MSO_SITE_ID\": \"\",\n            \"PHANTOM_RP_LB_ID1\": \"\",\n            \"PHANTOM_RP_LB_ID2\": \"\",\n            \"PHANTOM_RP_LB_ID3\": \"\",\n            \"IBGP_PEER_TEMPLATE\": \"\",\n            \"PHANTOM_RP_LB_ID4\": \"\",\n            \"abstract_ospf\": \"base_ospf\",\n            \"FEATURE_PTP\": \"false\",\n            \"L3_PARTITION_ID_RANGE\": \"50000-59000\",\n            \"DHCP_START_INTERNAL\": \"\",\n            \"SSPINE_COUNT\": \"0\",\n            \"ENABLE_SGT\": \"false\",\n            \"ADVERTISE_PIP_BGP\": \"false\",\n            \"FABRIC_VPC_QOS_POLICY_NAME\": \"\",\n            \"BFD_PIM_ENABLE\": \"\",\n            \"ENABLE_MACSEC_PREV\": \"false\",\n            \"NXC_DEST_VRF\": \"\",\n            \"DHCP_END\": \"\",\n            \"UNDERLAY_IS_V6\": \"false\",\n            \"FABRIC_VPC_DOMAIN_ID\": \"\",\n            \"SEED_SWITCH_CORE_INTERFACES\": \"\",\n            \"ALLOW_NXC_PREV\": \"\",\n            \"FABRIC_MTU_PREV\": \"9216\",\n            \"BFD_ISIS_ENABLE\": \"\",\n            \"HD_TIME\": \"180\",\n            \"AUTO_UNIQUE_VRF_LITE_IP_PREFIX\": \"false\",\n            \"OSPF_AUTH_ENABLE\": \"false\",\n            \"LOOPBACK1_IPV6_RANGE\": \"\",\n            \"ROUTER_ID_RANGE\": \"\",\n            \"ENABLE_MACSEC\": \"false\",\n            \"MSO_CONNECTIVITY_DEPLOYED\": \"\",\n            \"DEAFULT_QUEUING_POLICY_OTHER\": \"\",\n            \"MACSEC_REPORT_TIMER\": \"\",\n            \"UNNUM_DHCP_START_INTERNAL\": \"\",\n            \"PFC_WATCH_INT_PREV\": \"\",\n            \"MPLS_ISIS_AREA_NUM\": \"\",\n            \"PREMSO_PARENT_FABRIC\": \"\",\n            \"PTP_DOMAIN_ID\": \"\",\n            \"UNNUM_DHCP_END_INTERNAL\": \"\",\n            \"USE_LINK_LOCAL\": \"\",\n            \"AUTO_SYMMETRIC_VRF_LITE\": \"\",\n            \"BGP_AS_PREV\": \"\",\n            \"ENABLE_PBR\": \"false\",\n            \"DCI_SUBNET_TARGET_MASK\": \"30\",\n            \"ENABLE_TRMv6\": \"false\",\n            \"VPC_PEER_LINK_PO\": \"500\",\n            \"ISIS_AUTH_ENABLE\": \"\",\n            \"PER_VRF_LOOPBACK_AUTO_PROVISION\": \"false\",\n            \"REPLICATION_MODE\": \"Multicast\",\n            \"ENABLE_DCI_MACSEC_PREV\": \"false\",\n            \"SITE_ID_POLICY_ID\": \"\",\n            \"SGT_NAME_PREFIX\": \"\",\n            \"ANYCAST_RP_IP_RANGE\": \"10.254.254.0/24\",\n            \"VPC_ENABLE_IPv6_ND_SYNC\": \"true\",\n            \"TCAM_ALLOCATION\": \"true\",\n            \"abstract_isis_interface\": \"isis_interface\",\n            \"ENABLE_RT_INTF_STATS\": \"false\",\n            \"SERVICE_NETWORK_VLAN_RANGE\": \"3000-3199\",\n            \"MACSEC_ALGORITHM\": \"\",\n            \"ISIS_LEVEL\": \"\",\n            \"SUBNET_TARGET_MASK\": \"30\",\n            \"abstract_anycast_rp\": \"anycast_rp\",\n            \"AUTO_SYMMETRIC_DEFAULT_VRF\": \"\",\n            \"ENABLE_NETFLOW\": \"false\",\n            \"DEAFULT_QUEUING_POLICY_R_SERIES\": \"\",\n            \"PER_VRF_LOOPBACK_IP_RANGE_V6\": \"\",\n            \"BROWNFIELD_NETWORK_NAME_FORMAT\": \"Auto_Net_VNI$$VNI$$_VLAN$$VLAN_ID$$\",\n            \"temp_vpc_peer_link\": \"int_vpc_peer_link_po\",\n            \"ENABLE_FABRIC_VPC_DOMAIN_ID\": \"false\",\n            \"IBGP_PEER_TEMPLATE_LEAF\": \"\",\n            \"DCI_SUBNET_RANGE\": \"10.33.0.0/16\",\n            \"ENABLE_NXAPI\": \"true\",\n            \"VRF_LITE_AUTOCONFIG\": \"Manual\",\n            \"MGMT_GW_INTERNAL\": \"\",\n            \"GRFIELD_DEBUG_FLAG\": \"Disable\",\n            \"VRF_VLAN_RANGE\": \"2000-2299\",\n            \"ISIS_AUTH_KEYCHAIN_NAME\": \"\",\n            \"OBJECT_TRACKING_NUMBER_RANGE\": \"100-299\",\n            \"SSPINE_ADD_DEL_DEBUG_FLAG\": \"Disable\",\n            \"abstract_bgp_neighbor\": \"evpn_bgp_rr_neighbor\",\n            \"OSPF_AUTH_KEY_ID\": \"\",\n            \"PIM_HELLO_AUTH_ENABLE\": \"false\",\n            \"abstract_feature_leaf\": \"base_feature_leaf_upg\",\n            \"BFD_AUTH_ENABLE\": \"\",\n            \"INTF_STAT_LOAD_INTERVAL\": \"\",\n            \"BGP_LB_ID\": \"0\",\n            \"LOOPBACK1_IP_RANGE\": \"10.3.0.0/22\",\n            \"AGG_ACC_VPC_PO_ID_RANGE\": \"\",\n            \"EXTRA_CONF_TOR\": \"\",\n            \"AAA_SERVER_CONF\": \"\",\n            \"VPC_PEER_KEEP_ALIVE_OPTION\": \"management\",\n            \"AUTO_VRFLITE_IFC_DEFAULT_VRF\": \"\",\n            \"enableRealTimeBackup\": \"\",\n            \"DCI_MACSEC_KEY_STRING\": \"\",\n            \"ENABLE_AI_ML_QOS_POLICY\": \"false\",\n            \"V6_SUBNET_TARGET_MASK\": \"\",\n            \"STRICT_CC_MODE\": \"false\",\n            \"BROWNFIELD_SKIP_OVERLAY_NETWORK_ATTACHMENTS\": \"false\",\n            \"VPC_PEER_LINK_VLAN\": \"3600\",\n            \"NXAPI_HTTP_PORT\": \"80\",\n            \"abstract_trunk_host\": \"int_trunk_host\",\n            \"BGP_AUTH_ENABLE\": \"false\",\n            \"MST_INSTANCE_RANGE\": \"\",\n            \"PM_ENABLE_PREV\": \"false\",\n            \"ENABLE_AGG_ACC_ID_RANGE\": \"false\",\n            \"NXC_PROXY_PORT\": \"8080\",\n            \"RP_MODE\": \"asm\",\n            \"enableScheduledBackup\": \"\",\n            \"BFD_OSPF_ENABLE\": \"\",\n            \"abstract_ospf_interface\": \"ospf_interface_11_1\",\n            \"MACSEC_FALLBACK_ALGORITHM\": \"\",\n            \"UNNUM_DHCP_END\": \"\",\n            \"LOOPBACK0_IP_RANGE\": \"10.2.0.0/22\",\n            \"ENABLE_AAA\": \"\",\n            \"DEPLOYMENT_FREEZE\": \"false\",\n            \"L2_HOST_INTF_MTU_PREV\": \"9216\",\n            \"SGT_RECALC_STATUS\": \"empty\",\n            \"NETFLOW_MONITOR_LIST\": \"\",\n            \"NTP_SERVER_IP_LIST\": \"\",\n            \"ENABLE_AGENT\": \"false\",\n            \"MACSEC_FALLBACK_KEY_STRING\": \"\",\n            \"OVERLAY_MODE\": \"cli\",\n            \"PER_VRF_LOOPBACK_AUTO_PROVISION_PREV\": \"false\",\n            \"FF\": \"Easy_Fabric\",\n            \"STP_ROOT_OPTION\": \"unmanaged\",\n            \"ISIS_OVERLOAD_ENABLE\": \"\",\n            \"NETFLOW_RECORD_LIST\": \"\",\n            \"FABRIC_TYPE\": \"Switch_Fabric\",\n            \"PER_VRF_LOOPBACK_AUTO_PROVISION_V6\": \"false\",\n            \"SPINE_COUNT\": \"0\",\n            \"abstract_extra_config_bootstrap\": \"extra_config_bootstrap_11_1\",\n            \"L3VNI_IPv6_MCAST_GROUP\": \"\",\n            \"MPLS_LOOPBACK_IP_RANGE\": \"\",\n            \"LINK_STATE_ROUTING_TAG_PREV\": \"\",\n            \"DHCP_ENABLE\": \"\",\n            \"BFD_AUTH_KEY_ID\": \"\",\n            \"ALLOW_L3VNI_NO_VLAN\": \"true\",\n            \"MSO_SITE_GROUP_NAME\": \"\",\n            \"MGMT_PREFIX_INTERNAL\": \"\",\n            \"DHCP_IPV6_ENABLE_INTERNAL\": \"\",\n            \"BGP_AUTH_KEY_TYPE\": \"\",\n            \"SITE_ID\": \"\",\n            \"temp_anycast_gateway\": \"anycast_gateway\",\n            \"BRFIELD_DEBUG_FLAG\": \"Disable\",\n            \"BGP_AS\": \"65067\",\n            \"BOOTSTRAP_MULTISUBNET\": \"\",\n            \"ISIS_P2P_ENABLE\": \"\",\n            \"ENABLE_NGOAM\": \"true\",\n            \"CDP_ENABLE\": \"false\",\n            \"PTP_LB_ID\": \"\",\n            \"DHCP_IPV6_ENABLE\": \"\",\n            \"MACSEC_KEY_STRING\": \"\",\n            \"TOPDOWN_CONFIG_RM_TRACKING\": \"\",\n            \"ENABLE_L3VNI_NO_VLAN\": \"false\",\n            \"KME_SERVER_PORT\": \"\",\n            \"OSPF_AUTH_KEY\": \"\",\n            \"QKD_PROFILE_NAME\": \"\",\n            \"MVPN_VRI_ID_RANGE\": \"\",\n            \"ENABLE_FABRIC_VPC_DOMAIN_ID_PREV\": \"\",\n            \"ENABLE_DCI_MACSEC\": \"false\",\n            \"EXTRA_CONF_LEAF\": \"\",\n            \"ENABLE_AI_ML_QOS_POLICY_FLAP\": \"false\",\n            \"vrf_extension_template\": \"Default_VRF_Extension_Universal\",\n            \"DHCP_START\": \"\",\n            \"ENABLE_TRM\": \"false\",\n            \"ENABLE_PVLAN_PREV\": \"\",\n            \"FEATURE_PTP_INTERNAL\": \"false\",\n            \"SGT_PREPROV_RECALC_STATUS\": \"empty\",\n            \"ENABLE_NXAPI_HTTP\": \"true\",\n            \"MPLS_LB_ID\": \"\",\n            \"abstract_isis\": \"base_isis_level2\",\n            \"FABRIC_VPC_DOMAIN_ID_PREV\": \"\",\n            \"ROUTE_MAP_SEQUENCE_NUMBER_RANGE\": \"1-65534\",\n            \"NETWORK_VLAN_RANGE\": \"2300-2999\",\n            \"STATIC_UNDERLAY_IP_ALLOC\": \"false\",\n            \"MGMT_V6PREFIX_INTERNAL\": \"\",\n            \"MPLS_HANDOFF\": \"false\",\n            \"STP_BRIDGE_PRIORITY\": \"\",\n            \"scheduledTime\": \"\",\n            \"ANYCAST_LB_ID\": \"\",\n            \"MACSEC_CIPHER_SUITE\": \"\",\n            \"STP_VLAN_RANGE\": \"\",\n            \"MSO_CONTROLER_ID\": \"\",\n            \"POWER_REDUNDANCY_MODE\": \"ps-redundant\",\n            \"BFD_ENABLE\": \"false\",\n            \"abstract_extra_config_leaf\": \"extra_config_leaf\",\n            \"ANYCAST_GW_MAC\": \"2020.0000.00aa\",\n            \"abstract_dhcp\": \"base_dhcp\",\n            \"default_pvlan_sec_network\": \"\",\n            \"EXTRA_CONF_SPINE\": \"\",\n            \"NTP_SERVER_VRF\": \"\",\n            \"SPINE_SWITCH_CORE_INTERFACES\": \"\",\n            \"ENABLE_VRI_ID_REALLOC\": \"false\",\n            \"LINK_STATE_ROUTING_TAG\": \"UNDERLAY\",\n            \"ISIS_OVERLOAD_ELAPSE_TIME\": \"\",\n            \"DCI_MACSEC_ALGORITHM\": \"\",\n            \"RP_LB_ID\": \"254\",\n            \"AI_ML_QOS_POLICY\": \"\",\n            \"PTP_VLAN_ID\": \"\",\n            \"BOOTSTRAP_CONF\": \"\",\n            \"PER_VRF_LOOPBACK_AUTO_PROVISION_V6_PREV\": \"false\",\n            \"LINK_STATE_ROUTING\": \"ospf\",\n            \"ISIS_AUTH_KEY\": \"\",\n            \"network_extension_template\": \"Default_Network_Extension_Universal\",\n            \"DNS_SERVER_IP_LIST\": \"\",\n            \"ENABLE_EVPN\": \"true\",\n            \"abstract_multicast\": \"base_multicast_11_1\",\n            \"VPC_DELAY_RESTORE_TIME\": \"60\",\n            \"BFD_AUTH_KEY\": \"\",\n            \"IPv6_MULTICAST_GROUP_SUBNET\": \"\",\n            \"AGENT_INTF\": \"eth0\",\n            \"FABRIC_MTU\": \"9216\",\n            \"L3VNI_MCAST_GROUP\": \"\",\n            \"QKD_PROFILE_NAME_PREV\": \"\",\n            \"UNNUM_BOOTSTRAP_LB_ID\": \"\",\n            \"VPC_DOMAIN_ID_RANGE\": \"1-1000\",\n            \"HOST_INTF_ADMIN_STATE\": \"true\",\n            \"ALLOW_L3VNI_NO_VLAN_PREV\": \"\",\n            \"BFD_IBGP_ENABLE\": \"\",\n            \"SGT_PREPROVISION\": \"\",\n            \"DCI_MACSEC_FALLBACK_KEY_STRING\": \"\",\n            \"AUTO_UNIQUE_VRF_LITE_IP_PREFIX_PREV\": \"false\",\n            \"IPv6_ANYCAST_RP_IP_RANGE_INTERNAL\": \"\",\n            \"DCI_MACSEC_FALLBACK_ALGORITHM\": \"\",\n            \"VPC_AUTO_RECOVERY_TIME\": \"360\",\n            \"DNS_SERVER_VRF\": \"\",\n            \"UPGRADE_FROM_VERSION\": \"\",\n            \"ISIS_AREA_NUM\": \"\",\n            \"BANNER\": \"\",\n            \"NXC_SRC_INTF\": \"\",\n            \"SGT_ID_RANGE\": \"\",\n            \"ENABLE_QKD\": \"\",\n            \"PER_VRF_LOOPBACK_IP_RANGE\": \"\",\n            \"SGT_PREPROVISION_PREV\": \"\",\n            \"SYSLOG_SEV\": \"\",\n            \"abstract_loopback_interface\": \"int_fabric_loopback_11_1\",\n            \"SYSLOG_SERVER_VRF\": \"\",\n            \"EXTRA_CONF_INTRA_LINKS\": \"\",\n            \"SNMP_SERVER_HOST_TRAP\": \"true\",\n            \"PIM_HELLO_AUTH_KEY\": \"\",\n            \"KME_SERVER_IP\": \"\",\n            \"abstract_extra_config_spine\": \"extra_config_spine\",\n            \"temp_vpc_domain_mgmt\": \"vpc_domain_mgmt\",\n            \"V6_SUBNET_RANGE\": \"\",\n            \"SUBINTERFACE_RANGE\": \"2-511\",\n            \"BGP_AUTH_KEY\": \"\",\n            \"abstract_routed_host\": \"int_routed_host\",\n            \"ENABLE_PVLAN\": \"false\",\n            \"INBAND_DHCP_SERVERS\": \"\",\n            \"MPLS_ISIS_AREA_NUM_PREV\": \"\",\n            \"default_network\": \"Default_Network_Universal\",\n            \"PFC_WATCH_INT\": \"\",\n            \"ISIS_AUTH_KEYCHAIN_KEY_ID\": \"\",\n            \"MGMT_V6PREFIX\": \"\",\n            \"abstract_feature_spine\": \"base_feature_spine_upg\",\n            \"ENABLE_DEFAULT_QUEUING_POLICY\": \"false\",\n            \"ANYCAST_BGW_ADVERTISE_PIP\": \"false\",\n            \"NETFLOW_EXPORTER_LIST\": \"\",\n            \"RP_COUNT\": \"2\",\n            \"abstract_vlan_interface\": \"int_fabric_vlan_11_1\",\n            \"FABRIC_NAME\": \"MyFabric\",\n            \"abstract_pim_interface\": \"pim_interface\",\n            \"PM_ENABLE\": \"false\",\n            \"LOOPBACK0_IPV6_RANGE\": \"\",\n            \"IGNORE_CERT\": \"\",\n            \"DEFAULT_VRF_REDIS_BGP_RMAP\": \"\",\n            \"NVE_LB_ID\": \"1\",\n            \"OVERLAY_MODE_PREV\": \"\",\n            \"VPC_DELAY_RESTORE\": \"150\",\n            \"IPv6_ANYCAST_RP_IP_RANGE\": \"\",\n            \"UNDERLAY_IS_V6_PREV\": \"\",\n            \"SGT_OPER_STATUS\": \"off\",\n            \"NXAPI_HTTPS_PORT\": \"443\",\n            \"ENABLE_SGT_PREV\": \"false\",\n            \"ENABLE_VPC_PEER_LINK_NATIVE_VLAN\": \"false\",\n            \"L2_HOST_INTF_MTU\": \"9216\",\n            \"abstract_route_map\": \"route_map\",\n            \"TRUSTPOINT_LABEL\": \"\",\n            \"INBAND_MGMT_PREV\": \"false\",\n            \"EXT_FABRIC_TYPE\": \"\",\n            \"abstract_vpc_domain\": \"base_vpc_domain_11_1\",\n            \"ACTIVE_MIGRATION\": \"false\",\n            \"ISIS_AREA_NUM_PREV\": \"\",\n            \"COPP_POLICY\": \"strict\",\n            \"DHCP_END_INTERNAL\": \"\",\n            \"DCI_MACSEC_CIPHER_SUITE\": \"\",\n            \"BOOTSTRAP_ENABLE\": \"false\",\n            \"ADVERTISE_PIP_ON_BORDER\": \"true\",\n            \"default_vrf\": \"Default_VRF_Universal\",\n            \"NXC_PROXY_SERVER\": \"\",\n            \"OSPF_AREA_ID\": \"0.0.0.0\",\n            \"abstract_extra_config_tor\": \"extra_config_tor\",\n            \"SYSLOG_SERVER_IP_LIST\": \"\",\n            \"ENABLE_TENANT_DHCP\": \"true\",\n            \"BOOTSTRAP_ENABLE_PREV\": \"false\",\n            \"ANYCAST_RP_IP_RANGE_INTERNAL\": \"\",\n            \"RR_COUNT\": \"2\",\n            \"BOOTSTRAP_MULTISUBNET_INTERNAL\": \"\",\n            \"MGMT_GW\": \"\",\n            \"UNNUM_DHCP_START\": \"\",\n            \"MGMT_PREFIX\": \"\",\n            \"BFD_ENABLE_PREV\": \"\",\n            \"abstract_bgp_rr\": \"evpn_bgp_rr\",\n            \"INBAND_MGMT\": \"false\",\n            \"abstract_bgp\": \"base_bgp\",\n            \"SLA_ID_RANGE\": \"10000-19999\",\n            \"ENABLE_NETFLOW_PREV\": \"\",\n            \"SUBNET_RANGE\": \"10.4.0.0/16\",\n            \"DEAFULT_QUEUING_POLICY_CLOUDSCALE\": \"\",\n            \"MULTICAST_GROUP_SUBNET\": \"239.1.1.0/25\",\n            \"FABRIC_INTERFACE_TYPE\": \"p2p\",\n            \"ALLOW_NXC\": \"true\",\n            \"FABRIC_VPC_QOS\": \"false\",\n            \"OVERWRITE_GLOBAL_NXC\": \"false\",\n            \"AAA_REMOTE_IP_ENABLED\": \"false\",\n            \"L2_SEGMENT_ID_RANGE\": \"30000-49000\"\n        },\n        \"vrfTemplate\": \"Default_VRF_Universal\",\n        \"networkTemplate\": \"Default_Network_Universal\",\n        \"vrfExtensionTemplate\": \"Default_VRF_Extension_Universal\",\n        \"networkExtensionTemplate\": \"Default_Network_Extension_Universal\"\n    },\n    \"MESSAGE\": \"OK\",\n    \"METHOD\": \"POST\",\n    \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MyFabric/Easy_Fabric\"\n}\n(.venv) AROBEL-M-G793% \n</code></pre>"},{"location":"scripts/rest_post_request/#failure-login-credentials-are-invalid","title":"Failure - Login credentials are invalid","text":"Invalid login credentials<pre><code>(.venv) AROBEL-M-G793% ./rest_post_request.py --nd-username foo\nExiting.  Error detail: NdfcPythonSender.commit: Unable to login to the controller. Error detail: Sender.update_token: Unable to parse token from response: {'RETURN_CODE': 401, 'DATA': {'error': 'Invalid Username/Password'}, 'MESSAGE': 'Unauthorized', 'METHOD': 'POST', 'REQUEST_PATH': 'https://10.1.1.1/login'}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/rest_post_request/#failure-fabric-already-exists","title":"Failure - Fabric already exists","text":"Fabric already exists<pre><code>(.venv) AROBEL-M-G793% ./rest_post_request.py\n{\n    \"RETURN_CODE\": 500,\n    \"DATA\": {\n        \"timestamp\": 1730219442800,\n        \"status\": 500,\n        \"error\": \"Internal Server Error\",\n        \"path\": \"/rest/control/fabrics/MyFabric/Easy_Fabric\"\n    },\n    \"MESSAGE\": \"Internal Server Error\",\n    \"METHOD\": \"POST\",\n    \"REQUEST_PATH\": \"https://10.1.1.1/appcenter/cisco/ndfc/api/v1/lan-fabric/rest/control/fabrics/MyFabric/Easy_Fabric\"\n}\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/vrf_create/","title":"vrf_create.py","text":""},{"location":"scripts/vrf_create/#description","title":"Description","text":"<p>Create one or more VRFs (virtual routing and forwarding instances).</p>"},{"location":"scripts/vrf_create/#example-configuration-file","title":"Example configuration file","text":"config/config_vrf_create.yaml<pre><code>---\nconfig:\n  - fabric_name: MyFabric1\n    vrf_display_name: MyVrf1\n    vrf_id: 50005\n    vrf_name: MyVrf1\n    vrf_vlan_id: 3005\n  - fabric_name: MyFabric1\n    vrf_display_name: MyVrf2\n    vrf_id: 50006\n    vrf_name: MyVrf2\n    vrf_vlan_id: 3006\n</code></pre>"},{"location":"scripts/vrf_create/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./vrf_create.py --config config/config_vrf_create.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/vrf_create/#example-output","title":"Example output","text":""},{"location":"scripts/vrf_create/#success","title":"Success","text":"VRFs created successfully<pre><code>(.venv) AROBEL-M-G793% ./vrf_create.py --config prod/config_vrf_create.yaml\nCreated vrf MyVrf1 in fabric f1\nCreated vrf MyVrf2 in fabric f1\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/vrf_create/#failure-vrfs-already-exist-in-fabric-myfabric1","title":"Failure - VRFs already exist in fabric MyFabric1","text":"VRFs exist in the target fabric<pre><code>(.venv) AROBEL-M-G793% ./vrf_create.py --config prod/config_vrf_create.yaml\nError creating vrf MyVrf1. Error detail: VrfCreate._final_verification: VRF MyVrf1 already exists in fabric MyFabric1\nError creating vrf MyVrf2. Error detail: VrfCreate._final_verification: VRF MyVrf2 already exists in fabric MyFabric1\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/vrf_delete/","title":"vrf_delete.py","text":""},{"location":"scripts/vrf_delete/#description","title":"Description","text":"<p>Delete one or more VRFs (virtual routing and forwarding instances).</p>"},{"location":"scripts/vrf_delete/#example-configuration-file","title":"Example configuration file","text":"config/config_vrf_create.yaml<pre><code>---\nconfig:\n  - fabric_name: MyFabric1\n    vrf_names:\n    - MyVrf1\n    - MyVrf2\n  - fabric_name: MyFabric2\n    vrf_names:\n    - MyVrf3\n    - MyVrf4\n</code></pre>"},{"location":"scripts/vrf_delete/#example-usage","title":"Example Usage","text":"<p>The example below uses environment variables for credentials, so requires only the <code>--config</code> argument.  See Running the Example Scripts for details around specifying credentials from the command line, from environment variables, from Ansible Vault, or a combination of these credentials sources.</p> <pre><code>export ND_DOMAIN=local\nexport ND_IP4=10.1.1.1\nexport ND_PASSWORD=MySecret\nexport ND_USERNAME=admin\n./vrf_delete.py --config config/config_vrf_delete.yaml\n# output not shown\n</code></pre>"},{"location":"scripts/vrf_delete/#example-output","title":"Example output","text":""},{"location":"scripts/vrf_delete/#success","title":"Success","text":"VRFs deleted successfully<pre><code>(.venv) AROBEL-M-G793% ./vrf_delete.py --config prod/config_vrf_delete.yaml\nDeleted vrfs MyVrf1,MyVrf2 from fabric f1\n(.venv) AROBEL-M-G793%(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/vrf_delete/#failure-vrfs-do-not-exist-in-fabric-f1","title":"Failure - VRFs do not exist in fabric f1","text":"VRFs do not exist in the target fabric<pre><code>(.venv) AROBEL-M-G793% ./vrf_delete.py --config prod/config_vrf_create.yaml\nError deleting vrfs ['MyVrf1', 'MyVrf2'] from fabric f1. Error detail: VrfDelete._final_verification: VRF MyVrf1 does not exist in fabric f1\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"scripts/vrf_delete/#failure-fabric-f2-does-not-exist","title":"Failure - Fabric f2 does not exist","text":"Fabric does not exist<pre><code>(.venv) AROBEL-M-G793% ./vrf_delete.py --config prod/config_vrf_create.yaml\nError deleting vrfs ['MyVrf1', 'MyVrf2'] from fabric f2. Error detail: VrfDelete.get_vrfs: Fabric f2 does not exist on the controller.\n(.venv) AROBEL-M-G793%\n</code></pre>"},{"location":"setup/clone-the-repositories/","title":"Clone the repositories","text":"<p>We'll need to clone two repositories.</p> <ul> <li>ndfc-python</li> <li>ansible-dcnm</li> </ul> <p>It's recommended to clone the repositories side-by-side in the directory where you keep your repositories.  We'll use <code>$HOME/repos</code> in our examples.</p>"},{"location":"setup/clone-the-repositories/#ndfc-python","title":"<code>ndfc-python</code>","text":"<pre><code>cd $HOME/repos\ngit clone https://github.com/allenrobel/ndfc-python.git\n</code></pre>"},{"location":"setup/clone-the-repositories/#ansible-dcnm","title":"<code>ansible-dcnm</code>","text":"<pre><code>cd $HOME/repos\ngit clone https://github.com/CiscoDevNet/ansible-dcnm.git\n</code></pre> <p>Until relative-imports are integrated into the <code>ansible-dcnm</code> repository, you'll need to switch branches to the <code>develop</code> branch (if the branch isn't currently set to <code>develop</code>).</p> <pre><code>cd $HOME/repos/ansible-dcnm\ngit switch develop\n</code></pre>"},{"location":"setup/enable-logging/","title":"Enable logging","text":"<p>If you want to enable script logging (optional), set the following environment variable.</p> <pre><code>export NDFC_LOGGING_CONFIG=$HOME/repos/ndfc-python/lib/ndfc_python/logging_config.json\n</code></pre> <p><code>NDFC_LOGGING_CONFIG</code> should point to a standard Pyton logging configuration file.  There is an example file in this repository at <code>lib/ndfc_python/logging_config.json</code>.  Below is the contents.</p> Example logging configuration file<pre><code>{\n  \"version\": 1,\n  \"formatters\": {\n    \"standard\": {\n      \"class\": \"logging.Formatter\",\n      \"format\": \"%(asctime)s - %(levelname)s - [%(name)s.%(funcName)s.%(lineno)d] %(message)s\"\n    }\n  },\n  \"handlers\": {\n    \"console\": {\n        \"class\": \"logging.StreamHandler\",\n        \"formatter\": \"standard\",\n        \"stream\"  : \"ext://sys.stdout\"\n      },\n    \"file\": {\n      \"class\": \"logging.handlers.RotatingFileHandler\",\n      \"formatter\": \"standard\",\n      \"filename\": \"/tmp/ndfc-python.log\",\n      \"mode\": \"a\",\n      \"encoding\": \"utf-8\",\n      \"maxBytes\": 50000000,\n      \"backupCount\": 4\n    }\n  },\n  \"loggers\": {\n        \"ndfc_python\": {\n        \"handlers\": [\n            \"console\",\n            \"file\"\n        ],\n        \"level\": \"DEBUG\",\n        \"propagate\": false\n        },\n        \"dcnm\": {\n            \"handlers\": [\n            \"console\",\n            \"file\"\n            ],\n            \"level\": \"DEBUG\",\n            \"propagate\": false\n        },\n        \"root\": {\n            \"level\": \"INFO\",\n            \"handlers\": [\n            \"file\"\n            ]\n        }\n    }\n}\n</code></pre>"},{"location":"setup/running-the-example-scripts/","title":"Running the example scripts","text":"<p>An example configuration file for each script is located in <code>examples/config/config_&lt;script_name&gt;</code>,</p> <p>Some example configuration files contain only a subset of available parameters. See the documention for the class a script uses for a (more or less) complete listing of parameters.</p>"},{"location":"setup/running-the-example-scripts/#example-script-invocation","title":"Example script invocation","text":""},{"location":"setup/running-the-example-scripts/#using-the-command-line-for-all-credentials","title":"Using the command line for all credentials","text":"Using command line arguments<pre><code>export PYTHONPATH=${PYTHONPATH}:/path/to/this/repo/ndfc-python/lib\n# optional - to enable logging\n# export NDFC_LOGGING_CONFIG=/path/to/ndfc-python-logging-config.json\n\npy311) ~ % cd $HOME/ndfc-python/examples\n(py311) examples % ./device_info.py --config config/config_device_info.yaml --nd-password MyNdPassword --nd-username admin --nd-domain local --nd-ip4 10.1.1.1\n</code></pre>"},{"location":"setup/running-the-example-scripts/#using-a-combination-of-command-line-and-environment-variables-for-credentials","title":"Using a combination of command line and environment variables for credentials","text":"Using command line and environment<pre><code>export PYTHONPATH=${PYTHONPATH}:/path/to/this/repo/ndfc-python/lib\nexport ND_PASSWORD=MyNdPassword\nexport ND_DOMAIN=local\n\npy311) ~ % cd $HOME/ndfc-python/examples\n(py311) examples % ./device_info.py --config config/config_device_info.yaml --nd-username admin --nd-ip4 10.1.1.1\n</code></pre>"},{"location":"setup/running-the-example-scripts/#using-a-combination-of-command-line-environment-variables-and-ansible-vault-for-credentials","title":"Using a combination of command line, environment variables, and Ansible Vault for credentials","text":"<p>Below, we assume that <code>$HOME/.ansible/vault</code> contains <code>nd_password</code> and <code>nd_domain</code>.</p> Using command line and environment<pre><code>export PYTHONPATH=${PYTHONPATH}:/path/to/this/repo/ndfc-python/lib\nexport ND_IP4=10.1.1.1\n\npy311) ~ % cd $HOME/ndfc-python/examples\n(py311) examples % ./device_info.py --config config/config_device_info.yaml --nd-username admin --ansible-vault $HOME/.ansible/vault\n</code></pre>"},{"location":"setup/running-the-example-scripts/#see-also","title":"See also","text":"<ul> <li>List of ndfc-python credentials</li> <li>Using Ansible Vault</li> </ul>"},{"location":"setup/set-credentials/","title":"Credentials","text":"<p>Credentials to access the Nexus Dashboard can be set in a few ways.</p>"},{"location":"setup/set-credentials/#script-command-line-options","title":"Script command-line options","text":"<p>Script command line options, take precedence over everything else (environment variables and Ansible Vault).</p> <p>That is, if environment variables are set for <code>ND_PASSWORD</code> and <code>ND_USERNAME</code>, and your Ansible Vault contains <code>nd_domain</code>, you can override <code>ND_PASSWORD</code> and <code>nd_domain</code> (while using the value of ND_USERNAME) with:</p> Override environment variable<pre><code>./script_name.py --nd_password MyNewPassword --nd-domain local --ansible-vault $HOME/.ansible/vault\n</code></pre>"},{"location":"setup/set-credentials/#-nd-domain","title":"--nd-domain","text":"<p>Nexus Dashboard login domain.</p> <p>Sets <code>args.nd_domain</code> within scripts.</p>"},{"location":"setup/set-credentials/#-nd-ip4","title":"--nd-ip4","text":"<p>Nexus Dashboard IPv4 address</p> <p>Sets <code>args.nd_ip4</code> within scripts.</p>"},{"location":"setup/set-credentials/#-nd-password","title":"--nd-password","text":"<p>Nexus Dashboard password</p> <p>Sets <code>args.nd_password</code> within scripts.</p>"},{"location":"setup/set-credentials/#-nd-username","title":"--nd-username","text":"<p>Nexus Dashboard username</p> <p>Sets <code>args.nd_username</code> within scripts.</p>"},{"location":"setup/set-credentials/#-nxos-password","title":"--nxos-password","text":"<p>Password for NX-OS switches. Used for Nexus Dashboard Fabric Contoller switch discovery</p> <p>Sets <code>args.nxos_password</code> within scripts.</p>"},{"location":"setup/set-credentials/#-nxos-username","title":"--nxos-username","text":"<p>Username for NX-OS switches. Used for Nexus Dashboard Fabric Contoller switch discovery</p> <p>Sets <code>args.nxos_username</code> within scripts.</p>"},{"location":"setup/set-credentials/#environment-variables","title":"Environment variables","text":"<p>Credentials can be set using the following environment variables.</p>"},{"location":"setup/set-credentials/#nd_domain","title":"ND_DOMAIN","text":"<p>Nexus Dashboard login domain</p>"},{"location":"setup/set-credentials/#nd_ip4","title":"ND_IP4","text":"<p>Nexus Dashboard IPv4 address</p>"},{"location":"setup/set-credentials/#nd_password","title":"ND_PASSWORD","text":"<p>Nexus Dashboard password</p>"},{"location":"setup/set-credentials/#nd_username","title":"ND_USERNAME","text":"<p>Nexus Dashboard username</p>"},{"location":"setup/set-credentials/#nxos_password","title":"NXOS_PASSWORD","text":"<p>Password for NX-OS switches. Used for Nexus Dashboard Fabric Contoller switch discovery</p>"},{"location":"setup/set-credentials/#nxos_username","title":"NXOS_USERNAME","text":"<p>Username for NX-OS switches. Used for Nexus Dashboard Fabric Contoller switch discovery</p>"},{"location":"setup/set-credentials/#ansible-vault","title":"Ansible Vault","text":"<p>Lastly, for most example scripts, you can read the credentials from an Ansible Vault.  See Using Ansible Vault for details around encrypting key/values in a vault.</p> <p>To indicate to the script that an Ansible Vault should be used as credential source, use the following command line argument. It should point to a valid Ansible Vault file.</p>"},{"location":"setup/set-credentials/#-ansible-vault","title":"--ansible-vault","text":"Use Ansible Vault as a credential source<pre><code>./my_script.py --ansible-vault $HOME/.ansible/vault\n</code></pre> <p>The credential names within the vault file must be as follows.</p>"},{"location":"setup/set-credentials/#nd_domain_1","title":"nd_domain","text":"<p>Nexus Dashboard login domain.</p>"},{"location":"setup/set-credentials/#nd_ip4_1","title":"nd_ip4","text":"<p>Nexus Dashboard IPv4 address</p>"},{"location":"setup/set-credentials/#nd_password_1","title":"nd_password","text":"<p>Nexus Dashboard password</p>"},{"location":"setup/set-credentials/#nd_username_1","title":"nd_username","text":"<p>Nexus Dashboard username</p>"},{"location":"setup/set-credentials/#nxos_password_1","title":"nxos_password","text":"<p>Password for NX-OS switches. Used for Nexus Dashboard Fabric Contoller switch discovery</p>"},{"location":"setup/set-credentials/#nxos_username_1","title":"nxos_username","text":"<p>Username for NX-OS switches. Used for Nexus Dashboard Fabric Contoller switch discovery</p>"},{"location":"setup/update-your-pythonpath/","title":"Update your PYTHONPATH","text":"<p>Update your PYTHONPATH to include both <code>ndfc-python</code> and <code>ansible-dcnm</code> repositories.</p> <pre><code>export PYTHONPATH=$PYTHONPATH:$HOME/repos/ndfc-python/lib:$HOME/repos/ansible-dcnm\n</code></pre> <p>With the above in place, imports from the <code>ansible-dcnmn</code> repository will look like the following in your <code>ndfc-python</code> scripts.</p> Example imports<pre><code>from plugins.module_utils.common.rest_send import RestSend\nfrom plugins.module_utils.common.sender_requests import Sender\n</code></pre>"},{"location":"setup/using-ansible-vault/","title":"Using Ansible Vault","text":"<p>Most <code>ndfc-python</code> scripts now include an <code>--ansible-vault</code> command line argument. When this argument is present, you'll be asked for your vault password, and the script will read the vault for any of the credentials it needs.</p> <p>Below is a quick cheat sheet.</p>"},{"location":"setup/using-ansible-vault/#installation","title":"Installation","text":"<pre><code>pip install ansible\n</code></pre>"},{"location":"setup/using-ansible-vault/#update-your-vault-with-keyvalues-specific-to-ndfc-python","title":"Update your Vault with key/values specific to ndfc-python","text":"<p>Next, you'll need to edit your Ansible Vault file to add your Nexus Dashboard Controller credentials (username, password, login domain) and ip address, as well as the username and password for your NX-OS switches.  NX-OS credentials are used by, for example, reachability.py which uses them for switch discovery.</p> <p>It is recommended (but not mandatory) that you encrypt all passwords.  Below is one way to do this.</p>"},{"location":"setup/using-ansible-vault/#modify-pathtoyouransiblevaultfile","title":"Modify /path/to/your/ansible/vault/file","text":""},{"location":"setup/using-ansible-vault/#edit-nd_password-and-nxos_password","title":"Edit <code>nd_password</code> and <code>nxos_password</code>","text":"<ul> <li><code>nd_password</code> is the password used to login to the Nexus Dashboard controller.</li> <li><code>nxos_password</code> is the password used by Nexus Dashboard to login to NX-OS switches that it manages.</li> </ul> <p>Add <code>nd_password</code> and <code>nxos_password</code> in encrypted format (or non-encrypted, if you don't care about security).</p> <p>To add encrypted passwords, issue the following.</p> Generate encrypted passwords<pre><code>ansible-vault encrypt_string 'mySuperSecretNdfcPassword' --name 'nd_password' &gt;&gt; /path/to/your/ansible/vault/file\necho \"\" &gt;&gt; /path/to/your/ansible/vault/file\nansible-vault encrypt_string 'mySuperSecretNxosPassword' --name 'nxos_password' &gt;&gt; /path/to/your/ansible/vault/file\necho \"\" &gt;&gt; /path/to/your/ansible/vault/file\n</code></pre> <p><code>ansible-vault</code> will prompt you for a vault password, which you'll use to decrypt these passwords when running the example scripts.</p>"},{"location":"setup/using-ansible-vault/#example","title":"Example","text":"Example encrypted password<pre><code>% ansible-vault encrypt_string 'mySuperSecretNdfcPassword' --name 'nd_password' &gt;&gt; /path/to/your/ansible/vault/file\nNew Vault password: \nConfirm New Vault password: \n%\n% echo \"\" &gt;&gt; /path/to/your/ansible/vault/file\n% cat /path/to/your/ansible/vault/file\nnd_password: !vault |\n          $ANSIBLE_VAULT;1.1;AES256\n          35313565343034623966323832303764633165386439663133323832383336366362663431366565\n          6238373030393562363831616266336464353963393566300a316564663135323263653165393330\n          33353935396462663531323437336366653937326234313866623535313431366534363938633834\n          6563336634653963320a376364323430316134623430636265383561663631343763646465626365\n          36666366333438373537343033393939653830663061623362613439376161626439\n% \n</code></pre> <p>If you don't care about security, you can add non-encrypted passwords by editing the file directly. The following are example unencrypted passwords for the Nexus Dashboard controller and NX-OS devices added to this file:</p> Example non-encrypted passwords<pre><code>nd_password: mySuperSecretNdfcPassword\nnxos_password: mySuperSecretNxosPassword\n</code></pre>"},{"location":"setup/using-ansible-vault/#add-the-domain-for-nexus-dashboard-controller-login","title":"Add the domain for Nexus Dashboard Controller login","text":"<p>Change <code>nd_domain</code> in the same file to the domain associated with the above password that you're using on Nexus Dashboard.  If the <code>domain</code> field is not displayed when you login to the GUI, then use local, as shown below.</p> Example ND domain<pre><code>nd_domain: local\n</code></pre>"},{"location":"setup/using-ansible-vault/#add-usernames-for-nexus-dashboard-controller-and-switches","title":"Add usernames for Nexus Dashboard Controller and switches","text":"<p>Change <code>nd_username</code> in the same file to the username associated with the above password that you're using on Nexus Dashboard.</p> <p>Change <code>nxos_username</code> in the same file to the username used to login to your NX-OS switches.</p> Example username credentials<pre><code>nd_username: admin\nnxos_username: admin\n</code></pre>"},{"location":"setup/using-ansible-vault/#add-the-ipv4-address-of-your-nexus-dashboard-controller","title":"Add the IPv4 address of your Nexus Dashboard Controller","text":"Example ipv4 address<pre><code>nd_ip4: 192.168.1.1\n</code></pre>"},{"location":"setup/using-ansible-vault/#see-also","title":"See also","text":"<ul> <li>Credentials for a list of the credential names the scripts expect.</li> <li>Ansible Vault @ docs.ansible.com   for detailed Ansible Vault installation and usage.</li> </ul>"}]}